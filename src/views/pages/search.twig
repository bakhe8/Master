{% extends "views/layouts/master.twig" %}

{% block content %}
    <div class="container py-8 md:py-12">
        {# Breadcrumbs #}
        <salla-breadcrumb></salla-breadcrumb>

        {# Search Results Header #}
        <div class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                {{ trans('pages.search.title', {'query': request.query.q}) }}
            </h1>
            {% if products.count > 0 %}
                <p class="text-gray-600 dark:text-gray-300">
                    {{ trans('pages.categories.results_count', {'count': products.count}) }}
                </p>
            {% endif %}
        </div>

        {# Search Filters and Sorting (Placeholder for future implementation) #}
        <div class="flex items-center justify-between mb-6">
            {# You can add filter/sort components here, e.g., salla-filters, salla-sort-options #}
        </div>

        {# Product Grid #}
        {% if products.data|length > 0 %}
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6">
                {% for product in products.data %}
                    {% include "views/components/product-grid.twig" with { product: product } %}
                {% endfor %}
            </div>

            {# Pagination #}
            {% if products.pagination.total_pages > 1 %}
                <div class="mt-10 flex justify-center">
                    <salla-pagination
                        current-page="{{ products.pagination.current_page }}"
                        total-pages="{{ products.pagination.total_pages }}"
                        url-template="{{ products.pagination.url_template }}"
                    ></salla-pagination>
                </div>
            {% endif %}
        {% else %}
            {# No Results State #}
            <div class="text-center py-10">
                <i class="sicon-search text-7xl text-gray-300 dark:text-gray-600 mb-4"></i>
                <h2 class="text-2xl font-bold mb-2">{{ trans('pages.search.no_results') }}</h2>
                <p class="text-gray-600 dark:text-gray-400">{{ trans('pages.search.no_results_description') }}</p>
            </div>
        {% endif %}
    </div>
{% endblock %}