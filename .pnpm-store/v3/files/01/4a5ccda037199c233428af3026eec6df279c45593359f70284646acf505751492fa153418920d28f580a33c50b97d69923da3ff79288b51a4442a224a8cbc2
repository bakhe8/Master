/*!
 * Crafted with ❤ by Salla
 */
import{d as n}from"./p-CUu-nBEz.js";function t(n,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(e){if("default"!==e&&!(e in n)){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}}))})),Object.freeze(n)}var e,r={exports:{}},o=(e||(e=1,function(n){var t=function(n,t){for(var e in n)n.hasOwnProperty(e)&&t(e,n[e])},e=function(n){var e={};return t(n,(function(t){!function(n,t,e){"function"!=typeof e?Object.defineProperty(n,t,Object.assign({},e)):n[t]=e}(e,t,n[t])})),e},r=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e)return n.getAttribute(t)||n.hasAttribute(t);n.setAttribute(t,e)},o=["svg","path"],i=function(n){return o.includes(n)},u=function(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof e&&(o=e,e=null);var u=i(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);return e&&(i(n)?r(u,"class",e):u.className=e),t(o,(function(n,t){r(u,n,t)})),u},c=function(n,t){return function(n,e){return void 0!==e?t.splice(e,0,n):t.push(n),n}},a=function(n,t){return function(e){return t.splice(t.indexOf(e),1),e.element.parentNode&&n.removeChild(e.element),e}},f="undefined"!=typeof window&&void 0!==window.document,l=function(){return f},E="children"in(l()?u("svg"):{})?function(n){return n.children.length}:function(n){return n.childNodes.length},s=function(n,t,e,r){var o=e[0]||n.left,i=e[1]||n.top,u=o+n.width,c=i+n.height*(r[1]||1),a={element:Object.assign({},n),inner:{left:n.left,top:n.top,right:n.right,bottom:n.bottom},outer:{left:o,top:i,right:u,bottom:c}};return t.filter((function(n){return!n.isRectIgnored()})).map((function(n){return n.rect})).forEach((function(n){_(a.inner,Object.assign({},n.inner)),_(a.outer,Object.assign({},n.outer))})),T(a.inner),a.outer.bottom+=a.element.marginBottom,a.outer.right+=a.element.marginRight,T(a.outer),a},_=function(n,t){t.top+=n.top,t.right+=n.left,t.bottom+=n.top,t.left+=n.left,t.bottom>n.bottom&&(n.bottom=t.bottom),t.right>n.right&&(n.right=t.right)},T=function(n){n.width=n.right-n.left,n.height=n.bottom-n.top},I=function(n){return"number"==typeof n},d=function(n){return n<.5?2*n*n:(4-2*n)*n-1},v={spring:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.stiffness,r=void 0===t?.5:t,o=n.damping,i=void 0===o?.75:o,u=n.mass,c=void 0===u?10:u,a=null,f=null,l=0,E=!1,s=e({interpolate:function(n,t){if(!E){if(!I(a)||!I(f))return E=!0,void(l=0);(function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(n-t)<r&&Math.abs(e)<r})(f+=l+=-(f-a)*r/c,a,l*=i)||t?(l=0,E=!0,s.onupdate(f=a),s.oncomplete(f)):s.onupdate(f)}},target:{set:function(n){if(I(n)&&!I(f)&&(f=n),null===a&&(a=n,f=n),f===(a=n)||void 0===a)return E=!0,l=0,s.onupdate(f),void s.oncomplete(f);E=!1},get:function(){return a}},resting:{get:function(){return E}},onupdate:function(){},oncomplete:function(){}});return s},tween:function(){var n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.duration,i=void 0===o?500:o,u=r.easing,c=void 0===u?d:u,a=r.delay,f=void 0===a?0:a,l=null,E=!0,s=!1,_=null,T=e({interpolate:function(e,r){E||null===_||(null===l&&(l=e),e-l<f||((n=e-l-f)>=i||r?(n=1,T.onupdate((t=s?0:1)*_),T.oncomplete(t*_),E=!0):(t=n/i,T.onupdate((n>=0?c(s?1-t:t):0)*_))))},target:{get:function(){return s?0:_},set:function(n){if(null===_)return _=n,T.onupdate(n),void T.oncomplete(n);n<_?(_=1,s=!0):(s=!1,_=n),E=!1,l=null}},resting:{get:function(){return E}},onupdate:function(){},oncomplete:function(){}});return T}},D=function(n,t,e){var r=n[t]&&"object"==typeof n[t][e]?n[t][e]:n[t]||n,o="string"==typeof r?r:r.type,i="object"==typeof r?Object.assign({},r):{};return v[o]?v[o](i):null},R=function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach((function(t){n.forEach((function(n){var o=n,i=function(){return e[n]},u=function(t){return e[n]=t};"object"==typeof n&&(o=n.key,i=n.getter||i,u=n.setter||u),t[o]&&!r||(t[o]={get:i,set:u})}))}))},p=function(n){return null!=n},O={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},S=function(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!0;for(var e in t)if(t[e]!==n[e])return!0;return!1},A=function(n,t){var e=t.opacity,r=t.perspective,o=t.translateX,i=t.translateY,u=t.scaleX,c=t.scaleY,a=t.rotateX,f=t.rotateY,l=t.rotateZ,E=t.originX,s=t.originY,_=t.width,T=t.height,I="",d="";(p(E)||p(s))&&(d+="transform-origin: "+(E||0)+"px "+(s||0)+"px;"),p(r)&&(I+="perspective("+r+"px) "),(p(o)||p(i))&&(I+="translate3d("+(o||0)+"px, "+(i||0)+"px, 0) "),(p(u)||p(c))&&(I+="scale3d("+(p(u)?u:1)+", "+(p(c)?c:1)+", 1) "),p(l)&&(I+="rotateZ("+l+"rad) "),p(a)&&(I+="rotateX("+a+"rad) "),p(f)&&(I+="rotateY("+f+"rad) "),I.length&&(d+="transform:"+I+";"),p(e)&&(d+="opacity:"+e+";",0===e&&(d+="visibility:hidden;"),e<1&&(d+="pointer-events:none;")),p(T)&&(d+="height:"+T+"px;"),p(_)&&(d+="width:"+_+"px;");var v=n.elementCurrentStyle||"";d.length===v.length&&d===v||(n.style.cssText=d,n.elementCurrentStyle=d)},M={styles:function(n){var t=n.mixinConfig,e=n.viewProps,r=n.viewInternalAPI,o=n.viewExternalAPI,i=n.view,u=Object.assign({},e),c={};R(t,[r,o],e);var a=function(){return i.rect?s(i.rect,i.childViews,[e.translateX||0,e.translateY||0],[e.scaleX||0,e.scaleY||0]):null};return r.rect={get:a},o.rect={get:a},t.forEach((function(n){e[n]=void 0===u[n]?O[n]:u[n]})),{write:function(){if(S(c,e))return A(i.element,e),Object.assign(c,Object.assign({},e)),!0},destroy:function(){}}},listeners:function(n){var t,e=n.viewExternalAPI,r=n.view,o=[],i=(t=r.element,function(n,e){t.addEventListener(n,e)}),u=function(n){return function(t,e){n.removeEventListener(t,e)}}(r.element);return e.on=function(n,t){o.push({type:n,fn:t}),i(n,t)},e.off=function(n,t){o.splice(o.findIndex((function(e){return e.type===n&&e.fn===t})),1),u(n,t)},{write:function(){return!0},destroy:function(){o.forEach((function(n){u(n.type,n.fn)}))}}},animations:function(n){var e=n.mixinConfig,r=n.viewProps,o=n.viewInternalAPI,i=n.viewExternalAPI,u=Object.assign({},r),c=[];return t(e,(function(n,t){var e=D(t);e&&(e.onupdate=function(t){r[n]=t},e.target=u[n],R([{key:n,setter:function(n){e.target!==n&&(e.target=n)},getter:function(){return r[n]}}],[o,i],r,!0),c.push(e))})),{write:function(n){var t=document.hidden,e=!0;return c.forEach((function(r){r.resting||(e=!1),r.interpolate(n,t)})),e},destroy:function(){}}},apis:function(n){R(n.mixinConfig,n.viewExternalAPI,n.viewProps)}},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.layoutCalculated||(n.paddingTop=parseInt(e.paddingTop,10)||0,n.marginTop=parseInt(e.marginTop,10)||0,n.marginRight=parseInt(e.marginRight,10)||0,n.marginBottom=parseInt(e.marginBottom,10)||0,n.marginLeft=parseInt(e.marginLeft,10)||0,t.layoutCalculated=!0),n.left=t.offsetLeft||0,n.top=t.offsetTop||0,n.width=t.offsetWidth||0,n.height=t.offsetHeight||0,n.right=n.left+n.width,n.bottom=n.top+n.height,n.scrollTop=t.scrollTop,n.hidden=null===t.offsetParent,n},L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.tag,r=void 0===t?"div":t,o=n.name,i=void 0===o?null:o,f=n.attributes,l=void 0===f?{}:f,_=n.read,T=void 0===_?function(){}:_,I=n.write,d=void 0===I?function(){}:I,v=n.create,D=void 0===v?function(){}:v,R=n.destroy,p=void 0===R?function(){}:R,O=n.filterFrameActionsForChild,S=void 0===O?function(n,t){return t}:O,A=n.didCreateView,L=void 0===A?function(){}:A,g=n.didWriteView,P=void 0===g?function(){}:g,y=n.ignoreRect,b=void 0!==y&&y,G=n.ignoreRectUpdate,w=void 0!==G&&G,N=n.mixins,C=void 0===N?[]:N;return function(n){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=u(r,"filepond--"+i,l),_=window.getComputedStyle(f,null),I=m(),v=null,R=!1,O=[],A=[],g={},y={},G=[d],N=[T],h=[p],U=function(){return f},B=function(){return O.concat()},F=function(){return v||(v=s(I,O,[0,0],[1,1]))},V={element:{get:U},style:{get:function(){return _}},childViews:{get:B}},j=Object.assign({},V,{rect:{get:F},ref:{get:function(){return g}},is:function(n){return i===n},appendChild:(t=f,function(n,e){void 0!==e&&t.children[e]?t.insertBefore(n,t.children[e]):t.appendChild(n)}),createChildView:function(n){return function(t,e){return t(n,e)}}(n),linkView:function(n){return O.push(n),n},unlinkView:function(n){O.splice(O.indexOf(n),1)},appendChildView:c(0,O),removeChildView:a(f,O),registerWriter:function(n){return G.push(n)},registerReader:function(n){return N.push(n)},registerDestroyer:function(n){return h.push(n)},invalidateLayout:function(){return f.layoutCalculated=!1},dispatch:n.dispatch,query:n.query}),x={element:{get:U},childViews:{get:B},rect:{get:F},resting:{get:function(){return R}},isRectIgnored:function(){return b},_read:function(){v=null,O.forEach((function(n){return n._read()})),!(w&&I.width&&I.height)&&m(I,f,_);var n={root:W,props:o,rect:I};N.forEach((function(t){return t(n)}))},_write:function(n,t,e){var r=0===t.length;return G.forEach((function(i){!1===i({props:o,root:W,actions:t,timestamp:n,shouldOptimize:e})&&(r=!1)})),A.forEach((function(t){!1===t.write(n)&&(r=!1)})),O.filter((function(n){return!!n.element.parentNode})).forEach((function(o){o._write(n,S(o,t),e)||(r=!1)})),O.forEach((function(o,i){o.element.parentNode||(W.appendChild(o.element,i),o._read(),o._write(n,S(o,t),e),r=!1)})),R=r,P({props:o,root:W,actions:t,timestamp:n}),r},_destroy:function(){A.forEach((function(n){return n.destroy()})),h.forEach((function(n){n({root:W,props:o})})),O.forEach((function(n){return n._destroy()}))}},Y=Object.assign({},V,{rect:{get:function(){return I}}});Object.keys(C).sort((function(n,t){return"styles"===n?1:"styles"===t?-1:0})).forEach((function(n){var t=M[n]({mixinConfig:C[n],viewProps:o,viewState:y,viewInternalAPI:j,viewExternalAPI:x,view:e(Y)});t&&A.push(t)}));var W=e(j);D({root:W,props:o});var H=E(f);return O.forEach((function(n,t){W.appendChild(n.element,H+t)})),L(W),e(x)}},g=function(n,t){return function(e){var r=e.root,o=e.props,i=e.actions,u=void 0===i?[]:i,c=e.timestamp,a=e.shouldOptimize;u.filter((function(t){return n[t.type]})).forEach((function(t){return n[t.type]({root:r,props:o,action:t.data,timestamp:c,shouldOptimize:a})})),t&&t({root:r,props:o,actions:u,timestamp:c,shouldOptimize:a})}},P=function(n,t){return t.parentNode.insertBefore(n,t)},y=function(n,t){return t.parentNode.insertBefore(n,t.nextSibling)},b=function(n){return Array.isArray(n)},G=function(n){return null==n},w=function(n){return n.trim()},N=function(n){return""+n},C=function(n){return"boolean"==typeof n},h=function(n){return C(n)?n:"true"===n},U=function(n){return"string"==typeof n},B=function(n){return I(n)?n:U(n)?N(n).replace(/[a-z]+/gi,""):0},F=function(n){return parseInt(B(n),10)},V=function(n){return parseFloat(B(n))},j=function(n){return I(n)&&isFinite(n)&&Math.floor(n)===n},x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(j(n))return n;var e=N(n).trim();return/MB$/i.test(e)?(e=e.replace(/MB$i/,"").trim(),F(e)*t*t):/KB/i.test(e)?(e=e.replace(/KB$i/,"").trim(),F(e)*t):F(e)},Y=function(n){return"function"==typeof n},W={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},H=function(n,t,e,r,o){if(null===t)return null;if("function"==typeof t)return t;var i={url:"GET"===e||"PATCH"===e?"?"+n+"=":"",method:e,headers:o,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(U(t))return i.url=t,i;if(Object.assign(i,t),U(i.headers)){var u=i.headers.split(/:(.+)/);i.headers={header:u[0],value:u[1]}}return i.withCredentials=h(i.withCredentials),i},q=function(n){return"object"==typeof n&&null!==n},X=function(n){return b(n)?"array":function(n){return null===n}(n)?"null":j(n)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(n)?"bytes":function(n){return q(n)&&U(n.url)&&q(n.process)&&q(n.revert)&&q(n.restore)&&q(n.fetch)}(n)?"api":typeof n},z={array:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return G(n)?[]:b(n)?n:N(n).split(t).map(w).filter((function(n){return n.length}))},boolean:h,int:function(n){return"bytes"===X(n)?x(n):F(n)},number:V,float:V,bytes:x,string:function(n){return Y(n)?n:N(n)},function:function(n){return function(n){for(var t=self,e=n.split("."),r=null;r=e.shift();)if(!(t=t[r]))return null;return t}(n)},serverapi:function(n){return(r={}).url=U(e=n)?e:e.url||"",r.timeout=e.timeout?parseInt(e.timeout,10):0,r.headers=e.headers?e.headers:{},t(W,(function(n){r[n]=H(n,e[n],W[n],r.timeout,r.headers)})),r.process=e.process||U(e)||e.url?r.process:null,r.remove=e.remove||null,delete r.headers,r;var e,r},object:function(n){try{return JSON.parse(n.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(n){return null}}},k=function(n,t,e){if(n===t)return n;var r=X(n);if(r!==e){var o=z[e](n);if(r=X(o),null===o)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+e+'"';n=o}return n},Q=function(n){var r={};return t(n,(function(t){var e,o,i,u=n[t];r[t]=(o=u[1],i=e=u[0],{enumerable:!0,get:function(){return i},set:function(n){i=k(n,e,o)}})})),e(r)},Z=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return n.split(/(?=[A-Z])/).map((function(n){return n.toLowerCase()})).join(t)},$=function(n){return function(e,r,o){var i={};return t(n,(function(n){var t=Z(n,"_").toUpperCase();i["SET_"+t]=function(r){try{o.options[n]=r.value}catch(n){}e("DID_SET_"+t,{value:o.options[n]})}})),i}},K=function(n){return function(e){var r={};return t(n,(function(n){r["GET_"+Z(n,"_").toUpperCase()]=function(){return e.options[n]}})),r}},J=1,nn=2,tn=3,en=4,rn=5,on=function(){return Math.random().toString(36).substring(2,11)};function un(n,t){if(null==n)return{};var e,r,o=function(n,t){if(null==n)return{};var e,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t.indexOf(e=i[r])>=0||(o[e]=n[e]);return o}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t.indexOf(e=i[r])>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}function cn(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var an,fn,ln=function(n,t){return n.splice(t,1)},En=function(){var n=[],t=function(t,e){ln(n,n.findIndex((function(n){return n.event===t&&(n.cb===e||!e)})))},e=function(t,e,r){n.filter((function(n){return n.event===t})).map((function(n){return n.cb})).forEach((function(n){return function(n,t){t?n():document.hidden?Promise.resolve(1).then(n):setTimeout(n,0)}((function(){return n.apply(void 0,cn(e))}),r)}))};return{fireSync:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e(n,r,!0)},fire:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e(n,r,!1)},on:function(t,e){n.push({event:t,cb:e})},onOnce:function(e,r){n.push({event:e,cb:function(){t(e,r),r.apply(void 0,arguments)}})},off:t}},sn=function(n,t,e){Object.getOwnPropertyNames(n).filter((function(n){return!e.includes(n)})).forEach((function(e){return Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))},_n=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Tn=function(n){var t={};return sn(n,t,_n),t},In={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},dn={INPUT:1,LIMBO:2,LOCAL:3},vn=function(n){return/[^0-9]+/.exec(n)},Dn=function(){return vn(1.1.toLocaleString())[0]},Rn={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},pn=[],On=function(n,t,e){return new Promise((function(r,o){var i=pn.filter((function(t){return t.key===n})).map((function(n){return n.cb}));if(0!==i.length){var u=i.shift();i.reduce((function(n,t){return n.then((function(n){return t(n,e)}))}),u(t,e)).then((function(n){return r(n)})).catch((function(n){return o(n)}))}else r(t)}))},Sn=function(n,t,e){return pn.filter((function(t){return t.key===n})).map((function(n){return n.cb(t,e)}))},An=function(n,t){return pn.push({key:n,cb:t})},Mn=function(){return Object.assign({},mn)},mn={id:[null,Rn.STRING],name:["filepond",Rn.STRING],disabled:[!1,Rn.BOOLEAN],className:[null,Rn.STRING],required:[!1,Rn.BOOLEAN],captureMethod:[null,Rn.STRING],allowSyncAcceptAttribute:[!0,Rn.BOOLEAN],allowDrop:[!0,Rn.BOOLEAN],allowBrowse:[!0,Rn.BOOLEAN],allowPaste:[!0,Rn.BOOLEAN],allowMultiple:[!1,Rn.BOOLEAN],allowReplace:[!0,Rn.BOOLEAN],allowRevert:[!0,Rn.BOOLEAN],allowRemove:[!0,Rn.BOOLEAN],allowProcess:[!0,Rn.BOOLEAN],allowReorder:[!1,Rn.BOOLEAN],allowDirectoriesOnly:[!1,Rn.BOOLEAN],storeAsFile:[!1,Rn.BOOLEAN],forceRevert:[!1,Rn.BOOLEAN],maxFiles:[null,Rn.INT],checkValidity:[!1,Rn.BOOLEAN],itemInsertLocationFreedom:[!0,Rn.BOOLEAN],itemInsertLocation:["before",Rn.STRING],itemInsertInterval:[75,Rn.INT],dropOnPage:[!1,Rn.BOOLEAN],dropOnElement:[!0,Rn.BOOLEAN],dropValidation:[!1,Rn.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Rn.ARRAY],instantUpload:[!0,Rn.BOOLEAN],maxParallelUploads:[2,Rn.INT],allowMinimumUploadDuration:[!0,Rn.BOOLEAN],chunkUploads:[!1,Rn.BOOLEAN],chunkForce:[!1,Rn.BOOLEAN],chunkSize:[5e6,Rn.INT],chunkRetryDelays:[[500,1e3,3e3],Rn.ARRAY],server:[null,Rn.SERVER_API],fileSizeBase:[1e3,Rn.INT],labelFileSizeBytes:["bytes",Rn.STRING],labelFileSizeKilobytes:["KB",Rn.STRING],labelFileSizeMegabytes:["MB",Rn.STRING],labelFileSizeGigabytes:["GB",Rn.STRING],labelDecimalSeparator:[Dn(),Rn.STRING],labelThousandsSeparator:[(an=Dn(),fn=1e3.toLocaleString(),fn!==1e3.toString()?vn(fn)[0]:"."===an?",":"."),Rn.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Rn.STRING],labelInvalidField:["Field contains invalid files",Rn.STRING],labelFileWaitingForSize:["Waiting for size",Rn.STRING],labelFileSizeNotAvailable:["Size not available",Rn.STRING],labelFileCountSingular:["file in list",Rn.STRING],labelFileCountPlural:["files in list",Rn.STRING],labelFileLoading:["Loading",Rn.STRING],labelFileAdded:["Added",Rn.STRING],labelFileLoadError:["Error during load",Rn.STRING],labelFileRemoved:["Removed",Rn.STRING],labelFileRemoveError:["Error during remove",Rn.STRING],labelFileProcessing:["Uploading",Rn.STRING],labelFileProcessingComplete:["Upload complete",Rn.STRING],labelFileProcessingAborted:["Upload cancelled",Rn.STRING],labelFileProcessingError:["Error during upload",Rn.STRING],labelFileProcessingRevertError:["Error during revert",Rn.STRING],labelTapToCancel:["tap to cancel",Rn.STRING],labelTapToRetry:["tap to retry",Rn.STRING],labelTapToUndo:["tap to undo",Rn.STRING],labelButtonRemoveItem:["Remove",Rn.STRING],labelButtonAbortItemLoad:["Abort",Rn.STRING],labelButtonRetryItemLoad:["Retry",Rn.STRING],labelButtonAbortItemProcessing:["Cancel",Rn.STRING],labelButtonUndoItemProcessing:["Undo",Rn.STRING],labelButtonRetryItemProcessing:["Retry",Rn.STRING],labelButtonProcessItem:["Upload",Rn.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Rn.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Rn.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Rn.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Rn.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Rn.STRING],oninit:[null,Rn.FUNCTION],onwarning:[null,Rn.FUNCTION],onerror:[null,Rn.FUNCTION],onactivatefile:[null,Rn.FUNCTION],oninitfile:[null,Rn.FUNCTION],onaddfilestart:[null,Rn.FUNCTION],onaddfileprogress:[null,Rn.FUNCTION],onaddfile:[null,Rn.FUNCTION],onprocessfilestart:[null,Rn.FUNCTION],onprocessfileprogress:[null,Rn.FUNCTION],onprocessfileabort:[null,Rn.FUNCTION],onprocessfilerevert:[null,Rn.FUNCTION],onprocessfile:[null,Rn.FUNCTION],onprocessfiles:[null,Rn.FUNCTION],onremovefile:[null,Rn.FUNCTION],onpreparefile:[null,Rn.FUNCTION],onupdatefiles:[null,Rn.FUNCTION],onreorderfiles:[null,Rn.FUNCTION],beforeDropFile:[null,Rn.FUNCTION],beforeAddFile:[null,Rn.FUNCTION],beforeRemoveFile:[null,Rn.FUNCTION],beforePrepareFile:[null,Rn.FUNCTION],stylePanelLayout:[null,Rn.STRING],stylePanelAspectRatio:[null,Rn.STRING],styleItemPanelAspectRatio:[null,Rn.STRING],styleButtonRemoveItemPosition:["left",Rn.STRING],styleButtonProcessItemPosition:["right",Rn.STRING],styleLoadIndicatorPosition:["right",Rn.STRING],styleProgressIndicatorPosition:["right",Rn.STRING],styleButtonRemoveItemAlign:[!1,Rn.BOOLEAN],files:[[],Rn.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Rn.ARRAY]},Ln=function(n,t){return G(t)?n[0]||null:j(t)?n[t]||null:("object"==typeof t&&(t=t.id),n.find((function(n){return n.id===t}))||null)},gn=function(n){if(G(n))return n;if(/:/.test(n)){var t=n.split(":");return t[1]/t[0]}return parseFloat(n)},Pn=function(n){return n.filter((function(n){return!n.archived}))},yn={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},bn=null,Gn=[In.LOAD_ERROR,In.PROCESSING_ERROR,In.PROCESSING_REVERT_ERROR],wn=[In.LOADING,In.PROCESSING,In.PROCESSING_QUEUED,In.INIT],Nn=[In.PROCESSING_COMPLETE],Cn=function(n){return Gn.includes(n.status)},hn=function(n){return wn.includes(n.status)},Un=function(n){return Nn.includes(n.status)},Bn=function(n){return q(n.options.server)&&(q(n.options.server.process)||Y(n.options.server.process))},Fn=function(n){return{GET_STATUS:function(){var t=Pn(n.items),e=yn.ERROR,r=yn.BUSY,o=yn.IDLE,i=yn.READY;return 0===t.length?yn.EMPTY:t.some(Cn)?e:t.some(hn)?r:t.some(Un)?i:o},GET_ITEM:function(t){return Ln(n.items,t)},GET_ACTIVE_ITEM:function(t){return Ln(Pn(n.items),t)},GET_ACTIVE_ITEMS:function(){return Pn(n.items)},GET_ITEMS:function(){return n.items},GET_ITEM_NAME:function(t){var e=Ln(n.items,t);return e?e.filename:null},GET_ITEM_SIZE:function(t){var e=Ln(n.items,t);return e?e.fileSize:null},GET_STYLES:function(){return Object.keys(n.options).filter((function(n){return/^style/.test(n)})).map((function(t){return{name:t,value:n.options[t]}}))},GET_PANEL_ASPECT_RATIO:function(){return/circle/.test(n.options.stylePanelLayout)?1:gn(n.options.stylePanelAspectRatio)},GET_ITEM_PANEL_ASPECT_RATIO:function(){return n.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(t){return Pn(n.items).filter((function(n){return n.status===t}))},GET_TOTAL_ITEMS:function(){return Pn(n.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return n.options.storeAsFile&&function(){if(null===bn)try{var n=new DataTransfer;n.items.add(new File(["hello world"],"This_Works.txt"));var t=document.createElement("input");t.setAttribute("type","file"),t.files=n.files,bn=1===t.files.length}catch(n){bn=!1}return bn}()&&!Bn(n)},IS_ASYNC:function(){return Bn(n)},GET_FILE_SIZE_LABELS:function(n){return{labelBytes:n("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:n("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:n("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:n("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},Vn=function(n,t,e){return Math.max(Math.min(e,n),t)},jn=function(n){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(n)},xn=function(n){return(""+n).split("/").pop().split("?").shift()},Yn=function(n){return n.split(".").pop()},Wn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t+n).slice(-t.length)},Hn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return n.getFullYear()+"-"+Wn(n.getMonth()+1,"00")+"-"+Wn(n.getDate(),"00")+"_"+Wn(n.getHours(),"00")+"-"+Wn(n.getMinutes(),"00")+"-"+Wn(n.getSeconds(),"00")},qn=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n.slice(0,n.size,"string"==typeof e?e:n.type);return o.lastModifiedDate=new Date,n._relativePath&&(o._relativePath=n._relativePath),U(t)||(t=Hn()),t&&null===r&&Yn(t)?o.name=t:(r=r||function(n){if("string"!=typeof n)return"";var t=n.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""}(o.type),o.name=t+(r?"."+r:"")),o},Xn=function(n,t){var e=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(e){var r=new e;return r.append(n),r.getBlob(t)}return new Blob([n],{type:t})},zn=function(n){return(/^data:(.+);/.exec(n)||[])[1]||null},kn=function(n){var t=zn(n),e=function(n){return atob(function(n){return n.split(",")[1].replace(/\s/g,"")}(n))}(n);return function(n,t){for(var e=new ArrayBuffer(n.length),r=new Uint8Array(e),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return Xn(e,t)}(e,t)},Qn=function(n){if(!/^content-disposition:/i.test(n))return null;var t=n.split(/filename=|filename\*=.+''/).splice(1).map((function(n){return n.trim().replace(/^["']|[;"']{0,2}$/g,"")})).filter((function(n){return n.length}));return t.length?decodeURI(t[t.length-1]):null},Zn=function(n){if(/content-length:/i.test(n)){var t=n.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},$n=function(n){return/x-content-transfer-id:/i.test(n)&&(n.split(":")[1]||"").trim()||null},Kn=function(n){var t={source:null,name:null,size:null},e=n.split("\n"),r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var a=u.value,f=Qn(a);if(f)t.name=f;else{var l=Zn(a);if(l)t.size=l;else{var E=$n(a);E&&(t.source=E)}}}}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t},Jn=function(n){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},e=function(e){n?(t.timestamp=Date.now(),t.request=n(e,(function(n){t.duration=Date.now()-t.timestamp,t.complete=!0,n instanceof Blob&&(n=qn(n,n.name||xn(e))),r.fire("load",n instanceof Blob?n:n?n.body:null)}),(function(n){r.fire("error","string"==typeof n?{type:"error",code:0,body:n}:n)}),(function(n,e,o){o&&(t.size=o),t.duration=Date.now()-t.timestamp,n?(t.progress=e/o,r.fire("progress",t.progress)):t.progress=null}),(function(){r.fire("abort")}),(function(n){var e=Kn("string"==typeof n?n:n.headers);r.fire("meta",{size:t.size||e.size,filename:e.name,source:e.source})}))):r.fire("error",{type:"error",body:"Can't load URL",code:400})},r=Object.assign({},En(),{setSource:function(n){return t.source=n},getProgress:function(){return t.progress},abort:function(){t.request&&t.request.abort&&t.request.abort()},load:function(){var n,o,i=t.source;r.fire("init",i),i instanceof File?r.fire("load",i):i instanceof Blob?r.fire("load",qn(i,i.name)):jn(i)?r.fire("load",qn(kn(i),n,null,o)):e(i)}});return r},nt=function(n){return/GET|HEAD/.test(n)},tt=function(n,t,e){var r={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){o=!0,u.abort()}},o=!1,i=!1;e=Object.assign({method:"POST",headers:{},withCredentials:!1},e),t=encodeURI(t),nt(e.method)&&n&&(t=""+t+encodeURIComponent("string"==typeof n?n:JSON.stringify(n)));var u=new XMLHttpRequest;return(nt(e.method)?u:u.upload).onprogress=function(n){o||r.onprogress(n.lengthComputable,n.loaded,n.total)},u.onreadystatechange=function(){u.readyState<2||4===u.readyState&&0===u.status||i||(i=!0,r.onheaders(u))},u.onload=function(){u.status>=200&&u.status<300?r.onload(u):r.onerror(u)},u.onerror=function(){return r.onerror(u)},u.onabort=function(){o=!0,r.onabort()},u.ontimeout=function(){return r.ontimeout(u)},u.open(e.method,t,!0),j(e.timeout)&&(u.timeout=e.timeout),Object.keys(e.headers).forEach((function(n){var t=unescape(encodeURIComponent(e.headers[n]));u.setRequestHeader(n,t)})),e.responseType&&(u.responseType=e.responseType),e.withCredentials&&(u.withCredentials=!0),u.send(n),r},et=function(n,t,e,r){return{type:n,code:t,body:e,headers:r}},rt=function(n){return function(t){n(et("error",0,"Timeout",t.getAllResponseHeaders()))}},ot=function(n){return/\?/.test(n)},it=function(){for(var n="",t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.forEach((function(t){n+=ot(n)&&ot(t)?t.replace(/\?/,"&"):t})),n},ut=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!U(t.url))return null;var e=t.onload||function(n){return n},r=t.onerror||function(){return null};return function(o,i,u,c,a,f){var l=tt(o,it(n,t.url),Object.assign({},t,{responseType:"blob"}));return l.onload=function(n){var r=n.getAllResponseHeaders(),u=Kn(r).name||xn(o);i(et("load",n.status,"HEAD"===t.method?null:qn(e(n.response),u),r))},l.onerror=function(n){u(et("error",n.status,r(n.response)||n.statusText,n.getAllResponseHeaders()))},l.onheaders=function(n){f(et("headers",n.status,null,n.getAllResponseHeaders()))},l.ontimeout=rt(u),l.onprogress=c,l.onabort=a,l}},ct=0,at=1,ft=2,lt=3,Et=4,st=function(n,t,e,r,o,i,u,c,a,f,l){for(var E=[],s=l.chunkServer,_=l.chunkSize,T=l.chunkRetryDelays,I={serverId:l.chunkTransferId,aborted:!1},d=t.ondata||function(n){return n},v=t.onload||function(n,t){return"HEAD"===t?n.getResponseHeader("Upload-Offset"):n.response},D=t.onerror||function(){return null},R=Math.floor(r.size/_),p=0;p<=R;p++){var O=p*_,S=r.slice(O,O+_,"application/offset+octet-stream");E[p]={index:p,size:S.size,offset:O,data:S,file:r,progress:0,retries:cn(T),status:ct,error:null,request:null,timeout:null}}var A,M,m,L,g=function(n){return n.status===ct||n.status===lt},P=function(t){if(!I.aborted)if(t=t||E.find(g)){t.status=ft,t.progress=null;var e=s.ondata||function(n){return n},o=s.onerror||function(){return null},c=s.onload||function(){},f=it(n,s.url,I.serverId),l="function"==typeof s.headers?s.headers(t):Object.assign({},s.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":r.size,"Upload-Name":r.name}),_=t.request=tt(e(t.data),f,Object.assign({},s,{headers:l}));_.onload=function(n){c(n,t.index,E.length),t.status=at,t.request=null,G()},_.onprogress=function(n,e){t.progress=n?e:null,b()},_.onerror=function(n){t.status=lt,t.request=null,t.error=o(n.response)||n.statusText,y(t)||u(et("error",n.status,o(n.response)||n.statusText,n.getAllResponseHeaders()))},_.ontimeout=function(n){t.status=lt,t.request=null,y(t)||rt(u)(n)},_.onabort=function(){t.status=ct,t.request=null,a()}}else E.every((function(n){return n.status===at}))&&i(I.serverId)},y=function(n){return 0!==n.retries.length&&(n.status=Et,clearTimeout(n.timeout),n.timeout=setTimeout((function(){P(n)}),n.retries.shift()),!0)},b=function(){var n=E.reduce((function(n,t){return null===n||null===t.progress?null:n+t.progress}),0);if(null===n)return c(!1,0,0);var t=E.reduce((function(n,t){return n+t.size}),0);c(!0,n,t)},G=function(){E.filter((function(n){return n.status===ft})).length>=1||P()};return I.serverId?(A=function(n){I.aborted||(E.filter((function(t){return t.offset<n})).forEach((function(n){n.status=at,n.progress=n.size})),G())},M=it(n,s.url,I.serverId),m={headers:"function"==typeof t.headers?t.headers(I.serverId):Object.assign({},t.headers),method:"HEAD"},(L=tt(null,M,m)).onload=function(n){return A(v(n,m.method))},L.onerror=function(n){return u(et("error",n.status,D(n.response)||n.statusText,n.getAllResponseHeaders()))},L.ontimeout=rt(u)):function(i){var c=new FormData;q(o)&&c.append(e,JSON.stringify(o));var a="function"==typeof t.headers?t.headers(r,o):Object.assign({},t.headers,{"Upload-Length":r.size}),f=Object.assign({},t,{headers:a}),l=tt(d(c),it(n,t.url),f);l.onload=function(n){return i(v(n,f.method))},l.onerror=function(n){return u(et("error",n.status,D(n.response)||n.statusText,n.getAllResponseHeaders()))},l.ontimeout=rt(u)}((function(n){I.aborted||(f(n),I.serverId=n,G())})),{abort:function(){I.aborted=!0,E.forEach((function(n){clearTimeout(n.timeout),n.request&&n.request.abort()}))}}},_t=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return"function"==typeof t?function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.apply(void 0,[e].concat(o,[r]))}:t&&U(t.url)?function(n,t,e,r){return function(o,i,u,c,a,f,l){if(o){var E=r.chunkUploads;if(o instanceof Blob&&E&&(E&&o.size>r.chunkSize||r.chunkForce))return st(n,t,e,o,i,u,c,a,f,l,r);var s=t.ondata||function(n){return n},_=t.onload||function(n){return n},T=t.onerror||function(){return null},I="function"==typeof t.headers?t.headers(o,i)||{}:Object.assign({},t.headers),d=Object.assign({},t,{headers:I}),v=new FormData;q(i)&&v.append(e,JSON.stringify(i)),(o instanceof Blob?[{name:null,file:o}]:o).forEach((function(n){v.append(e,n.file,null===n.name?n.file.name:""+n.name+n.file.name)}));var D=tt(s(v),it(n,t.url),d);return D.onload=function(n){u(et("load",n.status,_(n.response),n.getAllResponseHeaders()))},D.onerror=function(n){c(et("error",n.status,T(n.response)||n.statusText,n.getAllResponseHeaders()))},D.ontimeout=rt(c),D.onprogress=a,D.onabort=f,D}}}(n,t,e,r):null},Tt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!U(t.url))return function(n,t){return t()};var e=t.onload||function(n){return n},r=t.onerror||function(){return null};return function(o,i,u){var c=tt(o,n+t.url,t);return c.onload=function(n){i(et("load",n.status,e(n.response),n.getAllResponseHeaders()))},c.onerror=function(n){u(et("error",n.status,r(n.response)||n.statusText,n.getAllResponseHeaders()))},c.ontimeout=rt(u),c}},It=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n+Math.random()*(t-n)},dt=function(n,t){var e={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},r=t.allowMinimumUploadDuration,o=function(){e.request&&(e.perceivedPerformanceUpdater.clear(),e.request.abort&&e.request.abort(),e.complete=!0)},i=r?function(){return e.progress?Math.min(e.progress,e.perceivedProgress):null}:function(){return e.progress||null},u=r?function(){return Math.min(e.duration,e.perceivedDuration)}:function(){return e.duration},c=Object.assign({},En(),{process:function(t,o){var i=function(){0!==e.duration&&null!==e.progress&&c.fire("progress",c.getProgress())},u=function(){e.complete=!0,c.fire("load-perceived",e.response.body)};c.fire("start"),e.timestamp=Date.now(),e.perceivedPerformanceUpdater=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,o=null,i=Date.now();return t>0&&function u(){var c=Date.now()-i,a=It(e,r);c+a>t&&(a=c+a-t);var f=c/t;f>=1||document.hidden?n(1):(n(f),o=setTimeout(u,a))}(),{clear:function(){clearTimeout(o)}}}((function(n){e.perceivedProgress=n,e.perceivedDuration=Date.now()-e.timestamp,i(),e.response&&1===e.perceivedProgress&&!e.complete&&u()}),r?It(750,1500):0),e.request=n(t,o,(function(n){e.response=q(n)?n:{type:"load",code:200,body:""+n,headers:{}},e.duration=Date.now()-e.timestamp,e.progress=1,c.fire("load",e.response.body),(!r||r&&1===e.perceivedProgress)&&u()}),(function(n){e.perceivedPerformanceUpdater.clear(),c.fire("error",q(n)?n:{type:"error",code:0,body:""+n})}),(function(n,t,r){e.duration=Date.now()-e.timestamp,e.progress=n?t/r:null,i()}),(function(){e.perceivedPerformanceUpdater.clear(),c.fire("abort",e.response?e.response.body:null)}),(function(n){c.fire("transfer",n)}))},abort:o,getProgress:i,getDuration:u,reset:function(){o(),e.complete=!1,e.perceivedProgress=0,e.progress=0,e.timestamp=null,e.perceivedDuration=0,e.duration=0,e.request=null,e.response=null}});return c},vt=function(n){return n.substring(0,n.lastIndexOf("."))||n},Dt=function(n){return!!(n instanceof File||n instanceof Blob&&n.name)},Rt=function n(t){if(!q(t))return t;var e=b(t)?[]:{};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];e[r]=o&&q(o)?n(o):o}return e},pt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=on(),i={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?In.PROCESSING_COMPLETE:In.INIT,activeLoader:null,activeProcessor:null},u=null,c={},a=function(n){return i.status=n},f=function(n){if(!i.released&&!i.frozen){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];E.fire.apply(E,[n].concat(e))}},l=function(n,t,e){var r=n.split("."),o=r[0],i=r.pop(),u=c;r.forEach((function(n){return u=u[n]})),JSON.stringify(u[i])!==JSON.stringify(t)&&(u[i]=t,f("metadata-update",{key:o,value:c[o],silent:e}))},E=Object.assign({id:{get:function(){return o}},origin:{get:function(){return n},set:function(t){return n=t}},serverId:{get:function(){return i.serverFileReference}},transferId:{get:function(){return i.transferId}},status:{get:function(){return i.status}},filename:{get:function(){return i.file.name}},filenameWithoutExtension:{get:function(){return vt(i.file.name)}},fileExtension:{get:function(){return Yn(i.file.name)}},fileType:{get:function(){return i.file.type}},fileSize:{get:function(){return i.file.size}},file:{get:function(){return i.file}},relativePath:{get:function(){return i.file._relativePath}},source:{get:function(){return i.source}},getMetadata:function(n){return Rt(n?c[n]:c)},setMetadata:function(n,t,e){if(q(n)){var r=n;return Object.keys(r).forEach((function(n){l(n,r[n],t)})),n}return l(n,t,e),t},extend:function(n,t){return s[n]=t},abortLoad:function(){i.activeLoader?i.activeLoader.abort():(a(In.INIT),f("load-abort"))},retryLoad:function(){i.activeLoader&&i.activeLoader.load()},requestProcessing:function(){i.processingAborted=!1,a(In.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise((function(n){if(!i.activeProcessor)return i.processingAborted=!0,a(In.IDLE),f("process-abort"),void n();u=function(){n()},i.activeProcessor.abort()}))},load:function(t,e,r){i.source=t,E.fireSync("init"),i.file?E.fireSync("load-skip"):(i.file=function(n){var t=[n.name,n.size,n.type];return n instanceof Blob||jn(n)?t[0]=n.name||Hn():jn(n)?(t[1]=n.length,t[2]=zn(n)):U(n)&&(t[0]=xn(n),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}}(t),e.on("init",(function(){f("load-init")})),e.on("meta",(function(t){i.file.size=t.size,i.file.filename=t.filename,t.source&&(n=dn.LIMBO,i.serverFileReference=t.source,i.status=In.PROCESSING_COMPLETE),f("load-meta")})),e.on("progress",(function(n){a(In.LOADING),f("load-progress",n)})),e.on("error",(function(n){a(In.LOAD_ERROR),f("load-request-error",n)})),e.on("abort",(function(){a(In.INIT),f("load-abort")})),e.on("load",(function(t){i.activeLoader=null;var e=function(t){i.file=Dt(t)?t:i.file,a(n===dn.LIMBO&&i.serverFileReference?In.PROCESSING_COMPLETE:In.IDLE),f("load")};i.serverFileReference?e(t):r(t,e,(function(n){i.file=t,f("load-meta"),a(In.LOAD_ERROR),f("load-file-error",n)}))})),e.setSource(t),i.activeLoader=e,e.load())},process:function n(t,e){if(i.processingAborted)i.processingAborted=!1;else if(a(In.PROCESSING),u=null,i.file instanceof Blob){t.on("load",(function(n){i.transferId=null,i.serverFileReference=n})),t.on("transfer",(function(n){i.transferId=n})),t.on("load-perceived",(function(n){i.activeProcessor=null,i.transferId=null,i.serverFileReference=n,a(In.PROCESSING_COMPLETE),f("process-complete",n)})),t.on("start",(function(){f("process-start")})),t.on("error",(function(n){i.activeProcessor=null,a(In.PROCESSING_ERROR),f("process-error",n)})),t.on("abort",(function(n){i.activeProcessor=null,i.serverFileReference=n,a(In.IDLE),f("process-abort"),u&&u()})),t.on("progress",(function(n){f("process-progress",n)}));var r=console.error;e(i.file,(function(n){i.archived||t.process(n,Object.assign({},c))}),r),i.activeProcessor=t}else E.on("load",(function(){n(t,e)}))},revert:function(n,t){return new Promise((function(e,r){var o=null!==i.serverFileReference?i.serverFileReference:i.transferId;null!==o?(n(o,(function(){i.serverFileReference=null,i.transferId=null,e()}),(function(n){t?(a(In.PROCESSING_REVERT_ERROR),f("process-revert-error"),r(n)):e()})),a(In.IDLE),f("process-revert")):e()}))}},En(),{freeze:function(){return i.frozen=!0},release:function(){return i.released=!0},released:{get:function(){return i.released}},archive:function(){return i.archived=!0},archived:{get:function(){return i.archived}},setFile:function(n){return i.file=n}}),s=e(E);return s},Ot=function(n,t){var e=function(n,t){return G(t)?0:U(t)?n.findIndex((function(n){return n.id===t})):-1}(n,t);if(!(e<0))return n[e]||null},St=function(n,t,e,r,o,i){var u=tt(null,n,{method:"GET",responseType:"blob"});return u.onload=function(e){var r=e.getAllResponseHeaders(),o=Kn(r).name||xn(n);t(et("load",e.status,qn(e.response,o),r))},u.onerror=function(n){e(et("error",n.status,n.statusText,n.getAllResponseHeaders()))},u.onheaders=function(n){i(et("headers",n.status,null,n.getAllResponseHeaders()))},u.ontimeout=rt(e),u.onprogress=r,u.onabort=o,u},At=function(n){return 0===n.indexOf("//")&&(n=location.protocol+n),n.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Mt=function(n){return function(){return Y(n)?n.apply(void 0,arguments):n}},mt=function(n,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout((function(){n("DID_UPDATE_ITEMS",{items:Pn(t.items)})}),0)},Lt=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return new Promise((function(t){if(!n)return t(!0);var r=n.apply(void 0,e);return null==r?t(!0):"boolean"==typeof r?t(r):void("function"==typeof r.then&&r.then(t))}))},gt=function(n,t){n.items.sort((function(n,e){return t(Tn(n),Tn(e))}))},Pt=function(n,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.query,o=e.success,i=void 0===o?function(){}:o,u=e.failure,c=void 0===u?function(){}:u,a=un(e,["query","success","failure"]),f=Ln(n.items,r);f?t(f,i,c,a||{}):c({error:et("error",0,"Item not found"),file:null})}},yt=function(n,t,e){return{ABORT_ALL:function(){Pn(e.items).forEach((function(n){n.freeze(),n.abortLoad(),n.abortProcessing()}))},DID_SET_FILES:function(t){var r=t.value,o=(void 0===r?[]:r).map((function(n){return{source:n.source?n.source:n,options:n.options}})),i=Pn(e.items);i.forEach((function(t){o.find((function(n){return n.source===t.source||n.source===t.file}))||n("REMOVE_ITEM",{query:t,remove:!1})})),i=Pn(e.items),o.forEach((function(t,e){i.find((function(n){return n.source===t.source||n.file===t.source}))||n("ADD_ITEM",Object.assign({},t,{interactionMethod:rn,index:e}))}))},DID_UPDATE_ITEM_METADATA:function(r){var o=r.id,i=r.action,u=r.change;u.silent||(clearTimeout(e.itemUpdateTimeout),e.itemUpdateTimeout=setTimeout((function(){var r,c=Ot(e.items,o);if(t("IS_ASYNC")){c.origin===dn.LOCAL&&n("DID_LOAD_ITEM",{id:c.id,error:null,serverFileReference:c.source});var a=function(){setTimeout((function(){n("REQUEST_ITEM_PROCESSING",{query:o})}),32)};return c.status===In.PROCESSING_COMPLETE?(r=e.options.instantUpload,void c.revert(Tt(e.options.server.url,e.options.server.revert),t("GET_FORCE_REVERT")).then(r?a:function(){}).catch((function(){}))):c.status===In.PROCESSING?function(n){c.abortProcessing().then(n?a:function(){})}(e.options.instantUpload):void(e.options.instantUpload&&a())}On("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t,action:i,change:u}).then((function(e){var r=t("GET_BEFORE_PREPARE_FILE");r&&(e=r(c,e)),e&&n("REQUEST_PREPARE_OUTPUT",{query:o,item:c,success:function(t){n("DID_PREPARE_OUTPUT",{id:o,file:t})}},!0)}))}),0))},MOVE_ITEM:function(n){var t=n.index,r=Ln(e.items,n.query);if(r){var o=e.items.indexOf(r);o!==(t=Vn(t,0,e.items.length-1))&&e.items.splice(t,0,e.items.splice(o,1)[0])}},SORT:function(r){gt(e,r.compare),n("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(e){var r=e.items,o=e.index,i=e.interactionMethod,u=e.success,c=void 0===u?function(){}:u,a=e.failure,f=void 0===a?function(){}:a,l=o;if(-1===o||void 0===o){var E=t("GET_ITEM_INSERT_LOCATION"),s=t("GET_TOTAL_ITEMS");l="before"===E?0:s}var _=t("GET_IGNORED_FILES"),T=r.filter((function(n){return Dt(n)?!_.includes(n.name.toLowerCase()):!G(n)})).map((function(t){return new Promise((function(e,r){n("ADD_ITEM",{interactionMethod:i,source:t.source||t,success:e,failure:r,index:l++,options:t.options||{}})}))}));Promise.all(T).then(c).catch(f)},ADD_ITEM:function(r){var o=r.source,i=r.index,u=void 0===i?-1:i,c=r.interactionMethod,a=r.success,f=void 0===a?function(){}:a,l=r.failure,E=void 0===l?function(){}:l,s=r.options,_=void 0===s?{}:s;if(G(o))E({error:et("error",0,"No source"),file:null});else if(!Dt(o)||!e.options.ignoredFiles.includes(o.name.toLowerCase())){if(!function(n){var t=Pn(n.items).length;if(!n.options.allowMultiple)return 0===t;var e=n.options.maxFiles;return null===e||t<e}(e)){if(e.options.allowMultiple||!e.options.allowMultiple&&!e.options.allowReplace){var T=et("warning",0,"Max files");return n("DID_THROW_MAX_FILES",{source:o,error:T}),void E({error:T,file:null})}var I=Pn(e.items)[0];if(I.status===In.PROCESSING_COMPLETE||I.status===In.PROCESSING_REVERT_ERROR){var d=t("GET_FORCE_REVERT");if(I.revert(Tt(e.options.server.url,e.options.server.revert),d).then((function(){d&&n("ADD_ITEM",{source:o,index:u,interactionMethod:c,success:f,failure:E,options:_})})).catch((function(){})),d)return}n("REMOVE_ITEM",{query:I.id})}var v="local"===_.type?dn.LOCAL:"limbo"===_.type?dn.LIMBO:dn.INPUT,D=pt(v,v===dn.INPUT?null:o,_.file);Object.keys(_.metadata||{}).forEach((function(n){D.setMetadata(n,_.metadata[n])})),Sn("DID_CREATE_ITEM",D,{query:t,dispatch:n});var R=t("GET_ITEM_INSERT_LOCATION");e.options.itemInsertLocationFreedom||(u="before"===R?-1:e.items.length),function(n,t,e){G(t)||(void 0===e?n.push(t):function(n,t,e){n.splice(t,0,e)}(n,e=Vn(e,0,n.length),t))}(e.items,D,u),Y(R)&&o&&gt(e,R);var p=D.id;D.on("init",(function(){n("DID_INIT_ITEM",{id:p})})),D.on("load-init",(function(){n("DID_START_ITEM_LOAD",{id:p})})),D.on("load-meta",(function(){n("DID_UPDATE_ITEM_META",{id:p})})),D.on("load-progress",(function(t){n("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})})),D.on("load-request-error",(function(t){var r=Mt(e.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return n("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:r,sub:t.code+" ("+t.body+")"}}),void E({error:t,file:Tn(D)});n("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:r,sub:e.options.labelTapToRetry}})})),D.on("load-file-error",(function(t){n("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),E({error:t.status,file:Tn(D)})})),D.on("load-abort",(function(){n("REMOVE_ITEM",{query:p})})),D.on("load-skip",(function(){D.on("metadata-update",(function(t){Dt(D.file)&&n("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),n("COMPLETE_LOAD_ITEM",{query:p,item:D,data:{source:o,success:f}})})),D.on("load",(function(){var r=function(r){r?(D.on("metadata-update",(function(t){n("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),On("SHOULD_PREPARE_OUTPUT",!1,{item:D,query:t}).then((function(r){var i=t("GET_BEFORE_PREPARE_FILE");i&&(r=i(D,r));var u=function(){n("COMPLETE_LOAD_ITEM",{query:p,item:D,data:{source:o,success:f}}),mt(n,e)};r?n("REQUEST_PREPARE_OUTPUT",{query:p,item:D,success:function(t){n("DID_PREPARE_OUTPUT",{id:p,file:t}),u()}},!0):u()}))):n("REMOVE_ITEM",{query:p})};On("DID_LOAD_ITEM",D,{query:t,dispatch:n}).then((function(){Lt(t("GET_BEFORE_ADD_FILE"),Tn(D)).then(r)})).catch((function(t){if(!t||!t.error||!t.status)return r(!1);n("DID_THROW_ITEM_INVALID",{id:p,error:t.error,status:t.status})}))})),D.on("process-start",(function(){n("DID_START_ITEM_PROCESSING",{id:p})})),D.on("process-progress",(function(t){n("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})})),D.on("process-error",(function(t){n("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:Mt(e.options.labelFileProcessingError)(t),sub:e.options.labelTapToRetry}})})),D.on("process-revert-error",(function(t){n("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:Mt(e.options.labelFileProcessingRevertError)(t),sub:e.options.labelTapToRetry}})})),D.on("process-complete",(function(t){n("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),n("DID_DEFINE_VALUE",{id:p,value:t})})),D.on("process-abort",(function(){n("DID_ABORT_ITEM_PROCESSING",{id:p})})),D.on("process-revert",(function(){n("DID_REVERT_ITEM_PROCESSING",{id:p}),n("DID_DEFINE_VALUE",{id:p,value:null})})),n("DID_ADD_ITEM",{id:p,index:u,interactionMethod:c}),mt(n,e);var O=e.options.server||{},S=O.url,A=O.load,M=O.restore,m=O.fetch;D.load(o,Jn(v===dn.INPUT?U(o)&&function(n){return(n.indexOf(":")>-1||n.indexOf("//")>-1)&&At(location.href)!==At(n)}(o)&&m?ut(S,m):St:ut(S,v===dn.LIMBO?M:A)),(function(n,e,r){On("LOAD_FILE",n,{query:t}).then(e).catch(r)}))}},REQUEST_PREPARE_OUTPUT:function(n){var e=n.item,r=n.success,o=n.failure,i=void 0===o?function(){}:o,u={error:et("error",0,"Item not found"),file:null};if(e.archived)return i(u);On("PREPARE_OUTPUT",e.file,{query:t,item:e}).then((function(n){On("COMPLETE_PREPARE_OUTPUT",n,{query:t,item:e}).then((function(n){if(e.archived)return i(u);r(n)}))}))},COMPLETE_LOAD_ITEM:function(r){var o=r.item,i=r.data,u=i.success,c=i.source,a=t("GET_ITEM_INSERT_LOCATION");if(Y(a)&&c&&gt(e,a),n("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===dn.INPUT?null:c}),u(Tn(o)),o.origin!==dn.LOCAL)return o.origin===dn.LIMBO?(n("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:c}),void n("DID_DEFINE_VALUE",{id:o.id,value:o.serverId||c})):void(t("IS_ASYNC")&&e.options.instantUpload&&n("REQUEST_ITEM_PROCESSING",{query:o.id}));n("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:Pt(e,(function(n){n.retryLoad()})),REQUEST_ITEM_PREPARE:Pt(e,(function(t,e,r){n("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:function(r){n("DID_PREPARE_OUTPUT",{id:t.id,file:r}),e({file:t,output:r})},failure:r},!0)})),REQUEST_ITEM_PROCESSING:Pt(e,(function(r,o,i){if(r.status===In.IDLE||r.status===In.PROCESSING_ERROR)r.status!==In.PROCESSING_QUEUED&&(r.requestProcessing(),n("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),n("PROCESS_ITEM",{query:r,success:o,failure:i},!0));else{var u=function(){return n("REQUEST_ITEM_PROCESSING",{query:r,success:o,failure:i})},c=function(){return document.hidden?u():setTimeout(u,32)};r.status===In.PROCESSING_COMPLETE||r.status===In.PROCESSING_REVERT_ERROR?r.revert(Tt(e.options.server.url,e.options.server.revert),t("GET_FORCE_REVERT")).then(c).catch((function(){})):r.status===In.PROCESSING&&r.abortProcessing().then(c)}})),PROCESS_ITEM:Pt(e,(function(r,o,i){var u=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",In.PROCESSING).length!==u){if(r.status!==In.PROCESSING){var c=function t(){var r=e.processingQueue.shift();if(r){var o=r.id,i=r.success,u=r.failure,c=Ln(e.items,o);c&&!c.archived?n("PROCESS_ITEM",{query:o,success:i,failure:u},!0):t()}};r.onOnce("process-complete",(function(){if(o(Tn(r)),c(),e.options.instantUpload&&r.origin===dn.LOCAL&&Y(e.options.server.remove)){var i=function(){};r.origin=dn.LIMBO,e.options.server.remove(r.source,i,i)}t("GET_ITEMS_BY_STATUS",In.PROCESSING_COMPLETE).length===e.items.length&&n("DID_COMPLETE_ITEM_PROCESSING_ALL")})),r.onOnce("process-error",(function(n){i({error:n,file:Tn(r)}),c()}));var a=e.options;r.process(dt(_t(a.server.url,a.server.process,a.name,{chunkTransferId:r.transferId,chunkServer:a.server.patch,chunkUploads:a.chunkUploads,chunkForce:a.chunkForce,chunkSize:a.chunkSize,chunkRetryDelays:a.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(function(e,o,i){On("PREPARE_OUTPUT",e,{query:t,item:r}).then((function(t){n("DID_PREPARE_OUTPUT",{id:r.id,file:t}),o(t)})).catch(i)}))}}else e.processingQueue.push({id:r.id,success:o,failure:i})})),RETRY_ITEM_PROCESSING:Pt(e,(function(t){n("REQUEST_ITEM_PROCESSING",{query:t})})),REQUEST_REMOVE_ITEM:Pt(e,(function(e){Lt(t("GET_BEFORE_REMOVE_FILE"),Tn(e)).then((function(t){t&&n("REMOVE_ITEM",{query:e})}))})),RELEASE_ITEM:Pt(e,(function(n){n.release()})),REMOVE_ITEM:Pt(e,(function(r,o,i,u){var c=function(){var t=r.id;Ot(e.items,t).archive(),n("DID_REMOVE_ITEM",{error:null,id:t,item:r}),mt(n,e),o(Tn(r))},a=e.options.server;r.origin===dn.LOCAL&&a&&Y(a.remove)&&!1!==u.remove?(n("DID_START_ITEM_REMOVE",{id:r.id}),a.remove(r.source,(function(){return c()}),(function(t){n("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:et("error",0,t,null),status:{main:Mt(e.options.labelFileRemoveError)(t),sub:e.options.labelTapToRetry}})}))):((u.revert&&r.origin!==dn.LOCAL&&null!==r.serverId||e.options.chunkUploads&&r.file.size>e.options.chunkSize||e.options.chunkUploads&&e.options.chunkForce)&&r.revert(Tt(e.options.server.url,e.options.server.revert),t("GET_FORCE_REVERT")),c())})),ABORT_ITEM_LOAD:Pt(e,(function(n){n.abortLoad()})),ABORT_ITEM_PROCESSING:Pt(e,(function(t){t.serverId?n("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then((function(){e.options.instantUpload&&n("REMOVE_ITEM",{query:t.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:Pt(e,(function(r){if(e.options.instantUpload){var o=function(t){t&&n("REVERT_ITEM_PROCESSING",{query:r})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return o(!0);var u=i(Tn(r));return null==u?o(!0):"boolean"==typeof u?o(u):void("function"==typeof u.then&&u.then(o))}n("REVERT_ITEM_PROCESSING",{query:r})})),REVERT_ITEM_PROCESSING:Pt(e,(function(r){r.revert(Tt(e.options.server.url,e.options.server.revert),t("GET_FORCE_REVERT")).then((function(){(e.options.instantUpload||function(n){return!Dt(n.file)}(r))&&n("REMOVE_ITEM",{query:r.id})})).catch((function(){}))})),SET_OPTIONS:function(t){var e=t.options,r=Object.keys(e),o=bt.filter((function(n){return r.includes(n)}));[].concat(cn(o),cn(Object.keys(e).filter((function(n){return!o.includes(n)})))).forEach((function(t){n("SET_"+Z(t,"_").toUpperCase(),{value:e[t]})}))}}},bt=["server"],Gt=function(n){return document.createElement(n)},wt=function(n,t){var e=n.childNodes[0];e?t!==e.nodeValue&&(e.nodeValue=t):(e=document.createTextNode(t),n.appendChild(e))},Nt=function(n,t,e,r){var o=(r%360-90)*Math.PI/180;return{x:n+e*Math.cos(o),y:t+e*Math.sin(o)}},Ct=function(n,t,e,r,o){var i=1;return o>r&&o-r<=.5&&(i=0),r>o&&r-o>=.5&&(i=0),function(n,t,e,r,o,i){var u=Nt(n,t,e,o),c=Nt(n,t,e,r);return["M",u.x,u.y,"A",e,e,0,i,0,c.x,c.y].join(" ")}(n,t,e,360*Math.min(.9999,r),360*Math.min(.9999,o),i)},ht=L({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(n){var t=n.root,e=n.props;e.spin=!1,e.progress=0,e.opacity=0;var r=u("svg");t.ref.path=u("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(t.ref.path),t.ref.svg=r,t.appendChild(r)},write:function(n){var t=n.root,e=n.props;if(0!==e.opacity){e.align&&(t.element.dataset.align=e.align);var o=parseInt(r(t.ref.path,"stroke-width"),10),i=.5*t.rect.element.width,u=0,c=0;e.spin?(u=0,c=.5):(u=0,c=e.progress);var a=Ct(i,i,i-o,u,c);r(t.ref.path,"d",a),r(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Ut=L({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(n){var t=n.props;n.root.element.innerHTML=(t.icon||"")+"<span>"+t.label+"</span>",t.isDisabled=!1},write:function(n){var t=n.root,e=n.props,o=e.isDisabled,i=t.query("GET_DISABLED")||0===e.opacity;i&&!o?(e.isDisabled=!0,r(t.element,"disabled","disabled")):!i&&o&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))}}),Bt=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.labelBytes,i=void 0===o?"bytes":o,u=r.labelKilobytes,c=void 0===u?"KB":u,a=r.labelMegabytes,f=void 0===a?"MB":a,l=r.labelGigabytes,E=void 0===l?"GB":l,s=e*e,_=e*e*e;return(n=Math.round(Math.abs(n)))<e?n+" "+i:n<s?Math.floor(n/e)+" "+c:n<_?Ft(n/s,1,t)+" "+f:Ft(n/_,2,t)+" "+E},Ft=function(n,t,e){return n.toFixed(t).split(".").filter((function(n){return"0"!==n})).join(e)},Vt=function(n){var t=n.root,e=n.props;wt(t.ref.fileSize,Bt(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),wt(t.ref.fileName,t.query("GET_ITEM_NAME",e.id))},jt=function(n){var t=n.root,e=n.props;j(t.query("GET_ITEM_SIZE",e.id))?Vt({root:t,props:e}):wt(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},xt=L({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:g({DID_LOAD_ITEM:Vt,DID_UPDATE_ITEM_META:Vt,DID_THROW_ITEM_LOAD_ERROR:jt,DID_THROW_ITEM_INVALID:jt}),didCreateView:function(n){Sn("CREATE_VIEW",Object.assign({},n,{view:n}))},create:function(n){var t=n.root,e=n.props,o=Gt("span");o.className="filepond--file-info-main",r(o,"aria-hidden","true"),t.appendChild(o),t.ref.fileName=o;var i=Gt("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,wt(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),wt(o,t.query("GET_ITEM_NAME",e.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Yt=function(n){return Math.round(100*n)},Wt=function(n){var t=n.root,e=n.action,r=null===e.progress?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+Yt(e.progress)+"%";wt(t.ref.main,r),wt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},Ht=function(n){var t=n.root;wt(t.ref.main,""),wt(t.ref.sub,"")},qt=function(n){var t=n.root,e=n.action;wt(t.ref.main,e.status.main),wt(t.ref.sub,e.status.sub)},Xt=L({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:g({DID_LOAD_ITEM:Ht,DID_REVERT_ITEM_PROCESSING:Ht,DID_REQUEST_ITEM_PROCESSING:function(n){var t=n.root;wt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),wt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(n){var t=n.root;wt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),wt(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(n){var t=n.root;wt(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),wt(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(n){var t=n.root,e=n.action,r=null===e.progress?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+Yt(e.progress)+"%";wt(t.ref.main,r),wt(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:Wt,DID_THROW_ITEM_LOAD_ERROR:qt,DID_THROW_ITEM_INVALID:qt,DID_THROW_ITEM_PROCESSING_ERROR:qt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:qt,DID_THROW_ITEM_REMOVE_ERROR:qt}),didCreateView:function(n){Sn("CREATE_VIEW",Object.assign({},n,{view:n}))},create:function(n){var t=n.root,e=Gt("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;var r=Gt("span");r.className="filepond--file-status-sub",t.appendChild(r),t.ref.sub=r,Wt({root:t,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),zt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},kt=[];t(zt,(function(n){kt.push(n)}));var Qt,Zt=function(n){if("right"===ne(n))return 0;var t=n.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},$t=function(n){return n.ref.buttonAbortItemLoad.rect.element.width},Kt=function(n){return Math.floor(n.ref.buttonRemoveItem.rect.element.height/4)},Jt=function(n){return Math.floor(n.ref.buttonRemoveItem.rect.element.left/2)},ne=function(n){return n.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},te={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(n){return n.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(n){return n.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},ee={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt}},re={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},oe={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:ne},info:{translateX:Zt},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:ne},buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{opacity:1,translateX:Zt}},DID_LOAD_ITEM:ee,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt}},DID_START_ITEM_PROCESSING:re,DID_REQUEST_ITEM_PROCESSING:re,DID_UPDATE_ITEM_PROCESS_PROGRESS:re,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Zt}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zt},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:ee},ie=L({create:function(n){var t=n.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),ue=g({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(n){n.root.ref.buttonAbortItemProcessing.label=n.action.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(n){n.root.ref.buttonAbortItemLoad.label=n.action.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(n){n.root.ref.buttonAbortItemRemoval.label=n.action.value},DID_REQUEST_ITEM_PROCESSING:function(n){var t=n.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(n){var t=n.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(n){var t=n.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(n){var t=n.root,e=n.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(n){var t=n.root,e=n.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),ce=L({create:function(n){var e,r=n.root,o=n.props,i=Object.keys(zt).reduce((function(n,t){return n[t]=Object.assign({},zt[t]),n}),{}),u=o.id,c=r.query("GET_ALLOW_REVERT"),a=r.query("GET_ALLOW_REMOVE"),f=r.query("GET_ALLOW_PROCESS"),l=r.query("GET_INSTANT_UPLOAD"),E=r.query("IS_ASYNC"),s=r.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");E?f&&!c?e=function(n){return!/RevertItemProcessing/.test(n)}:!f&&c?e=function(n){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(n)}:f||c||(e=function(n){return!/Process/.test(n)}):e=function(n){return!/Process/.test(n)};var _=e?kt.filter(e):kt.concat();if(l&&c&&(i.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",i.RevertItemProcessing.icon="GET_ICON_REMOVE"),E&&!c){var T=oe.DID_COMPLETE_ITEM_PROCESSING;T.info.translateX=Jt,T.info.translateY=Kt,T.status.translateY=Kt,T.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(E&&!f&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((function(n){oe[n].status.translateY=Kt})),oe.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=$t),s&&c){i.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var I=oe.DID_COMPLETE_ITEM_PROCESSING;I.info.translateX=Zt,I.status.translateY=Kt,I.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(i.RemoveItem.disabled=!0),t(i,(function(n,t){var e=r.createChildView(Ut,{label:r.query(t.label),icon:r.query(t.icon),opacity:0});_.includes(n)&&r.appendChildView(e),t.disabled&&(e.element.setAttribute("disabled","disabled"),e.element.setAttribute("hidden","hidden")),e.element.dataset.align=r.query("GET_STYLE_"+t.align),e.element.classList.add(t.className),e.on("click",(function(n){n.stopPropagation(),t.disabled||r.dispatch(t.action,{query:u})})),r.ref["button"+n]=e})),r.ref.processingCompleteIndicator=r.appendChildView(r.createChildView(ie)),r.ref.processingCompleteIndicator.element.dataset.align=r.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),r.ref.info=r.appendChildView(r.createChildView(xt,{id:u})),r.ref.status=r.appendChildView(r.createChildView(Xt,{id:u}));var d=r.appendChildView(r.createChildView(ht,{opacity:0,align:r.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));d.element.classList.add("filepond--load-indicator"),r.ref.loadProgressIndicator=d;var v=r.appendChildView(r.createChildView(ht,{opacity:0,align:r.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));v.element.classList.add("filepond--process-indicator"),r.ref.processProgressIndicator=v,r.ref.activeStyles=[]},write:function(n){var e=n.root,r=n.actions;ue({root:e,actions:r,props:n.props});var o=r.concat().filter((function(n){return/^DID_/.test(n.type)})).reverse().find((function(n){return oe[n.type]}));if(o){e.ref.activeStyles=[];var i=oe[o.type];t(te,(function(n,r){var o=e.ref[n];t(r,(function(t,r){e.ref.activeStyles.push({control:o,key:t,value:i[n]&&void 0!==i[n][t]?i[n][t]:r})}))}))}e.ref.activeStyles.forEach((function(n){var t=n.value;n.control[n.key]="function"==typeof t?t(e):t}))},didCreateView:function(n){Sn("CREATE_VIEW",Object.assign({},n,{view:n}))},name:"file"}),ae=L({create:function(n){var t=n.root,e=n.props;t.ref.fileName=Gt("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(ce,{id:e.id})),t.ref.data=!1},ignoreRect:!0,write:g({DID_LOAD_ITEM:function(n){var t=n.root;wt(t.ref.fileName,t.query("GET_ITEM_NAME",n.props.id))}}),didCreateView:function(n){Sn("CREATE_VIEW",Object.assign({},n,{view:n}))},tag:"fieldset",name:"file-wrapper"}),fe={type:"spring",damping:.6,mass:7},le=function(n,t,e){var r=L({name:"panel-"+t.name+" filepond--"+e,mixins:t.mixins,ignoreRectUpdate:!0}),o=n.createChildView(r,t.props);n.ref[t.name]=n.appendChildView(o)},Ee=L({name:"panel",read:function(n){return n.props.heightCurrent=n.root.ref.bottom.translateY},write:function(n){var t=n.root,e=n.props;if(null!==t.ref.scalable&&e.scalable===t.ref.scalable||(t.ref.scalable=!C(e.scalable)||e.scalable,t.element.dataset.scalable=t.ref.scalable),e.height){var r=t.ref.top.rect.element,o=t.ref.bottom.rect.element,i=Math.max(r.height+o.height,e.height);t.ref.center.translateY=r.height,t.ref.center.scaleY=(i-r.height-o.height)/100,t.ref.bottom.translateY=i-o.height}},create:function(n){var t=n.root,e=n.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:fe},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:fe},styles:["translateY"]}}].forEach((function(n){le(t,n,e.name)})),t.element.classList.add("filepond--"+e.name),t.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),se={type:"spring",stiffness:.75,damping:.45,mass:10},_e="spring",Te={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Ie=g({DID_UPDATE_PANEL_HEIGHT:function(n){n.root.height=n.action.height}}),de=g({DID_GRAB_ITEM:function(n){var t=n.root;n.props.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:function(n){n.root.element.dataset.dragState="drag"},DID_DROP_ITEM:function(n){var t=n.root,e=n.props;e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},(function(n){var t=n.root,e=n.actions,r=n.props,o=n.shouldOptimize;"drop"===t.element.dataset.dragState&&t.scaleX<=1&&(t.element.dataset.dragState="idle");var i=e.concat().filter((function(n){return/^DID_/.test(n.type)})).reverse().find((function(n){return Te[n.type]}));i&&i.type!==r.currentState&&(r.currentState=i.type,t.element.dataset.filepondItemState=Te[r.currentState]||"");var u=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");u?o||(t.height=t.rect.element.width*u):(Ie({root:t,actions:e,props:r}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),o&&(t.ref.panel.height=null),t.ref.panel.height=t.height})),ve=L({create:function(n){var t=n.root,e=n.props;if(t.ref.handleClick=function(){return t.dispatch("DID_ACTIVATE_ITEM",{id:e.id})},t.element.id="filepond--item-"+e.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(ae,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(Ee,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,t.query("GET_ALLOW_REORDER")){t.element.dataset.dragState="idle";t.element.addEventListener("pointerdown",(function(n){if(n.isPrimary){var r=!1,o={x:n.pageX,y:n.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:n.offsetX,y:n.offsetY};var i=(l=t.query("GET_ACTIVE_ITEMS"),E=l.map((function(n){return n.id})),s=void 0,{setIndex:function(n){s=n},getIndex:function(){return s},getItemIndex:function(n){return E.indexOf(n.id)}});t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:i});var u=function(n){n.isPrimary&&(n.stopPropagation(),n.preventDefault(),e.dragOffset={x:n.pageX-o.x,y:n.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!r&&(r=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:i}))},c=function(n){n.isPrimary&&(e.dragOffset={x:n.pageX-o.x,y:n.pageY-o.y},f())},a=function(){f()},f=function(){document.removeEventListener("pointercancel",a),document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",c),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:i}),r&&setTimeout((function(){return t.element.addEventListener("click",t.ref.handleClick)}),0)};document.addEventListener("pointercancel",a),document.addEventListener("pointermove",u),document.addEventListener("pointerup",c)}var l,E,s}))}},write:de,destroy:function(n){var t=n.root,e=n.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:_e,scaleY:_e,translateX:se,translateY:se,opacity:{type:"tween",duration:150}}}}),De=function(n,t){return Math.max(1,Math.floor((n+1)/t))},Re=function(n,t,e){if(e){var r=t.length,o=null;if(0===r||e.top<t[0].rect.element.top)return-1;var i=t[0].rect.element,u=i.width+(i.marginLeft+i.marginRight),c=De(n.rect.element.width,u);if(1===c){for(var a=0;a<r;a++){var f=t[a];if(e.top<f.rect.outer.top+.5*f.rect.element.height)return a}return r}for(var l=i.height+(i.marginTop+i.marginBottom),E=0;E<r;E++){var s=E%c,_=Math.floor(E/c)*l;if(e.top<_+l+i.marginBottom&&e.top>_-i.marginTop){if(e.left<s*u+u)return E;o=E!==r-1?E:null}}return null!==o?o:r}},pe={height:0,width:0,get getHeight(){return this.height},set setHeight(n){0!==this.height&&0!==n||(this.height=n)},get getWidth(){return this.width},set setWidth(n){0!==this.width&&0!==n||(this.width=n)}},Oe=function(n,t,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;n.dragOffset?(n.translateX=null,n.translateY=null,n.translateX=n.dragOrigin.x+n.dragOffset.x,n.translateY=n.dragOrigin.y+n.dragOffset.y,n.scaleX=1.025,n.scaleY=1.025):(n.translateX=t,n.translateY=e,Date.now()>n.spawnDate&&(0===n.opacity&&Se(n,t,e,r,o),n.scaleX=1,n.scaleY=1,n.opacity=1))},Se=function(n,t,e,r,o){n.interactionMethod===rn?(n.translateX=null,n.translateX=t,n.translateY=null,n.translateY=e):n.interactionMethod===nn?(n.translateX=null,n.translateX=t-20*r,n.translateY=null,n.translateY=e-10*o,n.scaleX=.8,n.scaleY=.8):n.interactionMethod===tn?(n.translateY=null,n.translateY=e-30):n.interactionMethod===J&&(n.translateX=null,n.translateX=t-30,n.translateY=null)},Ae=function(n){return n.rect.element.height+.5*n.rect.element.marginBottom+.5*n.rect.element.marginTop},Me=g({DID_ADD_ITEM:function(n){var t=n.root,e=n.action,r=e.id,o=e.index,i=e.interactionMethod;t.ref.addIndex=o;var u=Date.now(),c=u,a=1;if(i!==rn){a=0;var f=t.query("GET_ITEM_INSERT_INTERVAL"),l=u-t.ref.lastItemSpanwDate;c=l<f?u+(f-l):u}t.ref.lastItemSpanwDate=c,t.appendChildView(t.createChildView(ve,{spawnDate:c,id:r,opacity:a,interactionMethod:i}),o)},DID_REMOVE_ITEM:function(n){var t=n.action.id,e=n.root.childViews.find((function(n){return n.id===t}));e&&(e.scaleX=.9,e.scaleY=.9,e.opacity=0,e.markedForRemoval=!0)},DID_DRAG_ITEM:function(n){var t,e=n.root,r=n.action,o=r.id,i=r.dragState,u=e.query("GET_ITEM",{id:o}),c=e.childViews.find((function(n){return n.id===o})),a=e.childViews.length,f=i.getItemIndex(u);if(c){var l={x:c.dragOrigin.x+c.dragOffset.x+c.dragCenter.x,y:c.dragOrigin.y+c.dragOffset.y+c.dragCenter.y},E=Ae(c),s=(t=c).rect.element.width+.5*t.rect.element.marginLeft+.5*t.rect.element.marginRight,_=Math.floor(e.rect.outer.width/s);_>a&&(_=a);var T=Math.floor(a/_+1);pe.setHeight=E*T,pe.setWidth=s*_;var I={y:Math.floor(l.y/E),x:Math.floor(l.x/s),getGridIndex:function(){return l.y>pe.getHeight||l.y<0||l.x>pe.getWidth||l.x<0?f:this.y*_+this.x},getColIndex:function(){for(var n=e.query("GET_ACTIVE_ITEMS"),t=e.childViews.filter((function(n){return n.rect.element.height})),r=n.map((function(n){return t.find((function(t){return t.id===n.id}))})),o=r.findIndex((function(n){return n===c})),i=Ae(c),u=r.length,a=u,f=0,E=0,s=0,_=0;_<u;_++)if(f=Ae(r[_]),l.y<(E=(s=E)+f)){if(o>_){if(l.y<s+i){a=_;break}continue}a=_;break}return a}},d=_>1?I.getGridIndex():I.getColIndex();e.dispatch("MOVE_ITEM",{query:c,index:d});var v=i.getIndex();if(void 0===v||v!==d){if(i.setIndex(d),void 0===v)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:f,target:d})}}}}),me=L({create:function(n){var t=n.root;r(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},write:function(n){var t=n.root,e=n.props,r=n.shouldOptimize;Me({root:t,props:e,actions:n.actions});var o=e.dragCoordinates,i=t.rect.element.width,u=t.childViews.filter((function(n){return n.rect.element.height})),c=t.query("GET_ACTIVE_ITEMS").map((function(n){return u.find((function(t){return t.id===n.id}))})).filter((function(n){return n})),a=o?Re(t,c,o):null,f=t.ref.addIndex||null;t.ref.addIndex=null;var l=0,E=0,s=0;if(0!==c.length){var _=c[0].rect.element,T=_.marginTop+_.marginBottom,I=_.width+(_.marginLeft+_.marginRight),d=_.height+T,v=De(i,I);if(1===v){var D=0,R=0;c.forEach((function(n,t){if(a){var e=t-a;R=-2===e?.25*-T:-1===e?.75*-T:0===e?.75*T:1===e?.25*T:0}r&&(n.translateX=null,n.translateY=null),n.markedForRemoval||Oe(n,0,D+R),D+=(n.rect.element.height+T)*(n.markedForRemoval?n.opacity:1)}))}else{var p=0,O=0;c.forEach((function(n,t){t===a&&(l=1),t===f&&(s+=1),n.markedForRemoval&&n.opacity<.5&&(E-=1);var e=t+s+l+E,o=e%v,i=Math.floor(e/v),u=o*I,c=i*d,_=Math.sign(u-p),T=Math.sign(c-O);p=u,O=c,n.markedForRemoval||(r&&(n.translateX=null,n.translateY=null),Oe(n,u,c,_,T))}))}}},tag:"ul",name:"list",didWriteView:function(n){var t=n.root;t.childViews.filter((function(n){return n.markedForRemoval&&0===n.opacity&&n.resting})).forEach((function(n){n._destroy(),t.removeChildView(n)}))},filterFrameActionsForChild:function(n,t){return t.filter((function(t){return!t.data||!t.data.id||n.id===t.data.id}))},mixins:{apis:["dragCoordinates"]}}),Le=g({DID_DRAG:function(n){var t=n.root,e=n.props,r=n.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:r.position.scopeLeft-t.ref.list.rect.element.left,top:r.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},DID_END_DRAG:function(n){n.props.dragCoordinates=null}}),ge=L({create:function(n){var t=n.root,e=n.props;t.ref.list=t.appendChildView(t.createChildView(me)),e.dragCoordinates=null,e.overflowing=!1},write:function(n){var t=n.root,e=n.props;if(Le({root:t,props:e,actions:n.actions}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){var r=Math.round(e.overflow);r!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Pe=function(n,t,e){e?r(n,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:""):n.removeAttribute(t)},ye=function(n){var t=n.root,e=n.action;t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Pe(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},be=function(n){Pe(n.root.element,"multiple",n.action.value)},Ge=function(n){Pe(n.root.element,"webkitdirectory",n.action.value)},we=function(n){var t=n.root,e=t.query("GET_DISABLED"),r=t.query("GET_ALLOW_BROWSE");Pe(t.element,"disabled",e||!r)},Ne=function(n){var t=n.root;n.action.value?0===t.query("GET_TOTAL_ITEMS")&&Pe(t.element,"required",!0):Pe(t.element,"required",!1)},Ce=function(n){var t=n.action;Pe(n.root.element,"capture",!!t.value,!0===t.value?"":t.value)},he=function(n){var t=n.root,e=t.element;if(t.query("GET_TOTAL_ITEMS")>0){Pe(e,"required",!1),Pe(e,"name",!1);for(var r=t.query("GET_ACTIVE_ITEMS"),o=!1,i=0;i<r.length;i++)r[i].status===In.LOAD_ERROR&&(o=!0);t.element.setCustomValidity(o?t.query("GET_LABEL_INVALID_FIELD"):"")}else Pe(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&Pe(e,"required",!0)},Ue=L({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(n){var t=n.root,e=n.props;t.element.id="filepond--browser-"+e.id,r(t.element,"name",t.query("GET_NAME")),r(t.element,"aria-controls","filepond--assistant-"+e.id),r(t.element,"aria-labelledby","filepond--drop-label-"+e.id),ye({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),be({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Ge({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),we({root:t}),Ne({root:t,action:{value:t.query("GET_REQUIRED")}}),Ce({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=function(){if(t.element.value){var n=Array.from(t.element.files).map((function(n){return n._relativePath=n.webkitRelativePath,n}));setTimeout((function(){e.onload(n),function(n){if(n&&""!==n.value){try{n.value=""}catch(n){}if(n.value){var t=Gt("form"),e=n.parentNode,r=n.nextSibling;t.appendChild(n),t.reset(),r?e.insertBefore(n,r):e.appendChild(n)}}}(t.element)}),250)}},t.element.addEventListener("change",t.ref.handleChange)},destroy:function(n){var t=n.root;t.element.removeEventListener("change",t.ref.handleChange)},write:g({DID_LOAD_ITEM:he,DID_REMOVE_ITEM:he,DID_THROW_ITEM_INVALID:function(n){var t=n.root;t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:we,DID_SET_ALLOW_BROWSE:we,DID_SET_ALLOW_DIRECTORIES_ONLY:Ge,DID_SET_ALLOW_MULTIPLE:be,DID_SET_ACCEPTED_FILE_TYPES:ye,DID_SET_CAPTURE_METHOD:Ce,DID_SET_REQUIRED:Ne})}),Be=13,Fe=32,Ve=function(n,t){n.innerHTML=t;var e=n.querySelector(".filepond--label-action");return e&&r(e,"tabindex","0"),t},je=L({name:"drop-label",ignoreRect:!0,create:function(n){var t=n.root,e=n.props,o=Gt("label");r(o,"for","filepond--browser-"+e.id),r(o,"id","filepond--drop-label-"+e.id),t.ref.handleKeyDown=function(n){(n.keyCode===Be||n.keyCode===Fe)&&(n.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(n){n.target===o||o.contains(n.target)||t.ref.label.click()},o.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Ve(o,e.caption),t.appendChild(o),t.ref.label=o},destroy:function(n){var t=n.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:g({DID_SET_LABEL_IDLE:function(n){Ve(n.root.ref.label,n.action.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),xe=L({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Ye=g({DID_DRAG:function(n){var t=n.root,e=n.action;t.ref.blob?(t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1):function(n){var t=n.root;t.ref.blob=t.appendChildView(t.createChildView(xe,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:.5*t.rect.element.width,translateY:.5*t.rect.element.height}))}({root:t})},DID_DROP:function(n){var t=n.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},DID_END_DRAG:function(n){var t=n.root;t.ref.blob&&(t.ref.blob.opacity=0)}}),We=L({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(n){var t=n.root,e=n.actions;Ye({root:t,props:n.props,actions:e});var r=t.ref.blob;0===e.length&&r&&0===r.opacity&&(t.removeChildView(r),t.ref.blob=null)}}),He=function(n,t){try{var e=new DataTransfer;t.forEach((function(n){n instanceof File?e.items.add(n):e.items.add(new File([n],n.name,{type:n.type}))})),n.files=e.files}catch(n){return!1}return!0},qe=function(n,t){return n.ref.fields[t]},Xe=function(n){n.query("GET_ACTIVE_ITEMS").forEach((function(t){n.ref.fields[t.id]&&n.element.appendChild(n.ref.fields[t.id])}))},ze=function(n){return Xe(n.root)},ke=g({DID_SET_DISABLED:function(n){var t=n.root;t.element.disabled=t.query("GET_DISABLED")},DID_ADD_ITEM:function(n){var t=n.root,e=n.action,r=!(t.query("GET_ITEM",e.id).origin===dn.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=Gt("input");o.type=r?"file":"hidden",o.name=t.query("GET_NAME"),t.ref.fields[e.id]=o,Xe(t)},DID_LOAD_ITEM:function(n){var t=n.root,e=n.action,r=qe(t,e.id);if(r&&(null!==e.serverFileReference&&(r.value=e.serverFileReference),t.query("SHOULD_UPDATE_FILE_INPUT"))){var o=t.query("GET_ITEM",e.id);He(r,[o.file])}},DID_REMOVE_ITEM:function(n){var t=n.root,e=n.action,r=qe(t,e.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete t.ref.fields[e.id])},DID_DEFINE_VALUE:function(n){var t=n.root,e=n.action,r=qe(t,e.id);r&&(null===e.value?r.removeAttribute("value"):"file"!=r.type&&(r.value=e.value),Xe(t))},DID_PREPARE_OUTPUT:function(n){var t=n.root,e=n.action;t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((function(){var n=qe(t,e.id);n&&He(n,[e.file])}),0)},DID_REORDER_ITEMS:ze,DID_SORT_ITEMS:ze}),Qe=L({tag:"fieldset",name:"data",create:function(n){var t=n.root;t.ref.fields={};var e=document.createElement("legend");e.textContent="Files",t.element.appendChild(e)},write:ke,ignoreRect:!0}),Ze=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],$e=["css","csv","html","txt"],Ke={zip:"zip|compressed",epub:"application/epub+zip"},Je=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n=n.toLowerCase(),Ze.includes(n)?"image/"+("jpg"===n?"jpeg":"svg"===n?"svg+xml":n):$e.includes(n)?"text/"+n:Ke[n]||""},nr=function(n){return new Promise((function(t){var e=lr(n);if(e.length&&!tr(n))return t(e);er(n).then(t)}))},tr=function(n){return!!n.files&&n.files.length>0},er=function(n){return new Promise((function(t){var e=(n.items?Array.from(n.items):[]).filter((function(n){return rr(n)})).map((function(n){return or(n)}));e.length?Promise.all(e).then((function(n){var e=[];n.forEach((function(n){e.push.apply(e,n)})),t(e.filter((function(n){return n})).map((function(n){return n._relativePath||(n._relativePath=n.webkitRelativePath),n})))})).catch(console.error):t(n.files?Array.from(n.files):[])}))},rr=function(n){if(ar(n)){var t=fr(n);if(t)return t.isFile||t.isDirectory}return"file"===n.kind},or=function(n){return new Promise((function(t,e){cr(n)?ir(fr(n)).then(t).catch(e):t([n.getAsFile()])}))},ir=function(n){return new Promise((function(t,e){var r=[],o=0,i=0,u=function(){0===i&&0===o&&t(r)};!function n(t){o++;var c=t.createReader();!function t(){c.readEntries((function(e){if(0===e.length)return o--,void u();e.forEach((function(t){t.isDirectory?n(t):(i++,t.file((function(n){var e=ur(n);t.fullPath&&(e._relativePath=t.fullPath),r.push(e),i--,u()})))})),t()}),e)}()}(n)}))},ur=function(n){if(n.type.length)return n;var t=n.lastModifiedDate,e=n.name,r=Je(Yn(n.name));return r.length?((n=n.slice(0,n.size,r)).name=e,n.lastModifiedDate=t,n):n},cr=function(n){return ar(n)&&(fr(n)||{}).isDirectory},ar=function(n){return"webkitGetAsEntry"in n},fr=function(n){return n.webkitGetAsEntry()},lr=function(n){var t=[];try{if((t=sr(n)).length)return t;t=Er(n)}catch(n){}return t},Er=function(n){var t=n.getData("url");return"string"==typeof t&&t.length?[t]:[]},sr=function(n){var t=n.getData("text/html");if("string"==typeof t&&t.length){var e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},_r=[],Tr=function(n){return{pageLeft:n.pageX,pageTop:n.pageY,scopeLeft:n.offsetX||n.layerX,scopeTop:n.offsetY||n.layerY}},Ir=function(n){var t=_r.find((function(t){return t.element===n}));if(t)return t;var e=dr(n);return _r.push(e),e},dr=function(n){var e=[],r={dragenter:pr,dragover:Or,dragleave:Ar,drop:Sr},o={};t(r,(function(t,r){o[t]=r(n,e),n.addEventListener(t,o[t],!1)}));var i={element:n,addListener:function(u){return e.push(u),function(){e.splice(e.indexOf(u),1),0===e.length&&(_r.splice(_r.indexOf(i),1),t(r,(function(t){n.removeEventListener(t,o[t],!1)})))}}};return i},vr=function(n,t){var e,r=function(n,t){return"elementFromPoint"in n||(n=document),n.elementFromPoint(t.x,t.y)}("getRootNode"in(e=t)?e.getRootNode():document,{x:n.pageX-window.pageXOffset,y:n.pageY-window.pageYOffset});return r===t||t.contains(r)},Dr=null,Rr=function(n,t){try{n.dropEffect=t}catch(n){}},pr=function(n,t){return function(n){n.preventDefault(),Dr=n.target,t.forEach((function(t){var e=t.onenter;vr(n,t.element)&&(t.state="enter",e(Tr(n)))}))}},Or=function(n,t){return function(n){n.preventDefault();var e=n.dataTransfer;nr(e).then((function(r){var o=!1;t.some((function(t){var i=t.filterElement,u=t.element,c=t.onenter,a=t.onexit,f=t.ondrag,l=t.allowdrop;Rr(e,"copy");var E=l(r);if(E)if(vr(n,u)){if(o=!0,null===t.state)return t.state="enter",void c(Tr(n));if(t.state="over",i&&!E)return void Rr(e,"none");f(Tr(n))}else i&&!o&&Rr(e,"none"),t.state&&(t.state=null,a(Tr(n)));else Rr(e,"none")}))}))}},Sr=function(n,t){return function(n){n.preventDefault(),nr(n.dataTransfer).then((function(e){t.forEach((function(t){var r=t.filterElement,o=t.element,i=t.ondrop,u=t.onexit,c=t.allowdrop;if(t.state=null,!r||vr(n,o))return c(e)?void i(Tr(n),e):u(Tr(n))}))}))}},Ar=function(n,t){return function(n){Dr===n.target&&t.forEach((function(t){var e=t.onexit;t.state=null,e(Tr(n))}))}},Mr=function(n,t,e){n.classList.add("filepond--hopper");var r=e.filterItems,o=void 0===r?function(n){return n}:r,i=function(n,t,e){var r=Ir(t),o={element:n,filterElement:e,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return o.destroy=r.addListener(o),o}(n,e.catchesDropsOnPage?document.documentElement:n,e.requiresDropOnElement),u="",c="";i.allowdrop=function(n){return t(o(n))},i.ondrop=function(n,e){var r=o(e);t(r)?(c="drag-drop",a.onload(r,n)):a.ondragend(n)},i.ondrag=function(n){a.ondrag(n)},i.onenter=function(n){c="drag-over",a.ondragstart(n)},i.onexit=function(n){c="drag-exit",a.ondragend(n)};var a={updateHopperState:function(){u!==c&&(n.dataset.hopperState=c,u=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){i.destroy()}};return a},mr=!1,Lr=[],gr=function(n){var t=document.activeElement;if(t&&(/textarea|input/i.test(t.nodeName)||"true"===t.getAttribute("contenteditable")||""===t.getAttribute("contenteditable"))){for(var e=!1,r=t;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}nr(n.clipboardData).then((function(n){n.length&&Lr.forEach((function(t){return t(n)}))}))},Pr=function(){var n=function(n){t.onload(n)},t={destroy:function(){ln(Lr,Lr.indexOf(n)),0===Lr.length&&(document.removeEventListener("paste",gr),mr=!1)},onload:function(){}};return function(n){Lr.includes(n)||(Lr.push(n),mr||(mr=!0,document.addEventListener("paste",gr)))}(n),t},yr=null,br=null,Gr=[],wr=function(n,t){n.element.textContent=t},Nr=function(n,t,e){var r=n.query("GET_TOTAL_ITEMS");wr(n,e+" "+t+", "+r+" "+n.query(1===r?"GET_LABEL_FILE_COUNT_SINGULAR":"GET_LABEL_FILE_COUNT_PLURAL")),clearTimeout(br),br=setTimeout((function(){!function(n){n.element.textContent=""}(n)}),1500)},Cr=function(n){return n.element.parentNode.contains(document.activeElement)},hr=function(n){var t=n.root,e=t.query("GET_ITEM",n.action.id).filename,r=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");wr(t,e+" "+r)},Ur=function(n){var t=n.root,e=n.action,r=t.query("GET_ITEM",e.id);wr(t,e.status.main+" "+r.filename+" "+e.status.sub)},Br=L({create:function(n){var t=n.root;t.element.id="filepond--assistant-"+n.props.id,r(t.element,"role","alert"),r(t.element,"aria-live","polite"),r(t.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:g({DID_LOAD_ITEM:function(n){var t=n.root,e=n.action;if(Cr(t)){t.element.textContent="";var r=t.query("GET_ITEM",e.id);Gr.push(r.filename),clearTimeout(yr),yr=setTimeout((function(){Nr(t,Gr.join(", "),t.query("GET_LABEL_FILE_ADDED")),Gr.length=0}),750)}},DID_REMOVE_ITEM:function(n){var t=n.root,e=n.action;Cr(t)&&Nr(t,e.item.filename,t.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:function(n){var t=n.root,e=t.query("GET_ITEM",n.action.id).filename,r=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");wr(t,e+" "+r)},DID_ABORT_ITEM_PROCESSING:hr,DID_REVERT_ITEM_PROCESSING:hr,DID_THROW_ITEM_REMOVE_ERROR:Ur,DID_THROW_ITEM_LOAD_ERROR:Ur,DID_THROW_ITEM_INVALID:Ur,DID_THROW_ITEM_PROCESSING_ERROR:Ur}),tag:"span",name:"assistant"}),Fr=function(n){return n.replace(new RegExp((arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-")+".","g"),(function(n){return n.charAt(1).toUpperCase()}))},Vr=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Date.now(),o=null;return function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];clearTimeout(o);var a=Date.now()-r,f=function(){r=Date.now(),n.apply(void 0,u)};a<t?e||(o=setTimeout(f,t-a)):f()}},jr=function(n){return n.preventDefault()},xr=function(n){var t=n.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Yr=function(n){var t=0,e=0,r=n.ref.list,o=r.childViews[0],i=o.childViews.filter((function(n){return n.rect.element.height})),u=n.query("GET_ACTIVE_ITEMS").map((function(n){return i.find((function(t){return t.id===n.id}))})).filter((function(n){return n}));if(0===u.length)return{visual:t,bounds:e};var c=o.rect.element.width,a=Re(o,u,r.dragCoordinates),f=u[0].rect.element,l=f.marginTop+f.marginBottom,E=f.width+(f.marginLeft+f.marginRight),s=f.height+l,_=void 0!==a&&a>=0?1:0,T=u.find((function(n){return n.markedForRemoval&&n.opacity<.45}))?-1:0,I=u.length+_+T,d=De(c,E);return 1===d?u.forEach((function(n){var r=n.rect.element.height+l;e+=r,t+=r*n.opacity})):(e=Math.ceil(I/d)*s,t=e),{visual:t,bounds:e}},Wr=function(n){var t=n.ref.measureHeight||null;return{cappedHeight:parseInt(n.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},Hr=function(n,t){var e=n.query("GET_ALLOW_REPLACE"),r=n.query("GET_ALLOW_MULTIPLE"),o=n.query("GET_TOTAL_ITEMS"),i=n.query("GET_MAX_FILES"),u=t.length;return!r&&u>1?(n.dispatch("DID_THROW_MAX_FILES",{source:t,error:et("warning",0,"Max files")}),!0):!(!r&&e||!(j(i=r?i:1)&&o+u>i)||(n.dispatch("DID_THROW_MAX_FILES",{source:t,error:et("warning",0,"Max files")}),0))},qr=function(n,t,e){var r=n.childViews[0];return Re(r,t,{left:e.scopeLeft-r.rect.element.left,top:e.scopeTop-(n.rect.outer.top+n.rect.element.marginTop+n.rect.element.scrollTop)})},Xr=function(n){var t=n.query("GET_ALLOW_DROP"),e=n.query("GET_DISABLED"),r=t&&!e;if(r&&!n.ref.hopper){var o=Mr(n.element,(function(t){var e=n.query("GET_BEFORE_DROP_FILE")||function(){return!0};return!n.query("GET_DROP_VALIDATION")||t.every((function(t){return Sn("ALLOW_HOPPER_ITEM",t,{query:n.query}).every((function(n){return!0===n}))&&e(t)}))}),{filterItems:function(t){var e=n.query("GET_IGNORED_FILES");return t.filter((function(n){return!Dt(n)||!e.includes(n.name.toLowerCase())}))},catchesDropsOnPage:n.query("GET_DROP_ON_PAGE"),requiresDropOnElement:n.query("GET_DROP_ON_ELEMENT")});o.onload=function(t,e){var r=n.ref.list.childViews[0].childViews.filter((function(n){return n.rect.element.height})),o=n.query("GET_ACTIVE_ITEMS").map((function(n){return r.find((function(t){return t.id===n.id}))})).filter((function(n){return n}));On("ADD_ITEMS",t,{dispatch:n.dispatch}).then((function(t){if(Hr(n,t))return!1;n.dispatch("ADD_ITEMS",{items:t,index:qr(n.ref.list,o,e),interactionMethod:nn})})),n.dispatch("DID_DROP",{position:e}),n.dispatch("DID_END_DRAG",{position:e})},o.ondragstart=function(t){n.dispatch("DID_START_DRAG",{position:t})},o.ondrag=Vr((function(t){n.dispatch("DID_DRAG",{position:t})})),o.ondragend=function(t){n.dispatch("DID_END_DRAG",{position:t})},n.ref.hopper=o,n.ref.drip=n.appendChildView(n.createChildView(We))}else!r&&n.ref.hopper&&(n.ref.hopper.destroy(),n.ref.hopper=null,n.removeChildView(n.ref.drip))},zr=function(n,t){var e=n.query("GET_ALLOW_BROWSE"),r=n.query("GET_DISABLED"),o=e&&!r;o&&!n.ref.browser?n.ref.browser=n.appendChildView(n.createChildView(Ue,Object.assign({},t,{onload:function(t){On("ADD_ITEMS",t,{dispatch:n.dispatch}).then((function(t){if(Hr(n,t))return!1;n.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:tn})}))}})),0):!o&&n.ref.browser&&(n.removeChildView(n.ref.browser),n.ref.browser=null)},kr=function(n){var t=n.query("GET_ALLOW_PASTE"),e=n.query("GET_DISABLED"),r=t&&!e;r&&!n.ref.paster?(n.ref.paster=Pr(),n.ref.paster.onload=function(t){On("ADD_ITEMS",t,{dispatch:n.dispatch}).then((function(t){if(Hr(n,t))return!1;n.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:en})}))}):!r&&n.ref.paster&&(n.ref.paster.destroy(),n.ref.paster=null)},Qr=g({DID_SET_ALLOW_BROWSE:function(n){zr(n.root,n.props)},DID_SET_ALLOW_DROP:function(n){Xr(n.root)},DID_SET_ALLOW_PASTE:function(n){kr(n.root)},DID_SET_DISABLED:function(n){var t=n.root,e=n.props;Xr(t),kr(t),zr(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Zr=L({name:"root",read:function(n){var t=n.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:function(n){var t=n.root,e=n.props,r=t.query("GET_ID");r&&(t.element.id=r);var o=t.query("GET_CLASS_NAME");o&&o.split(" ").filter((function(n){return n.length})).forEach((function(n){t.element.classList.add(n)})),t.ref.label=t.appendChildView(t.createChildView(je,Object.assign({},e,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(ge,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(Ee,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Br,Object.assign({},e))),t.ref.data=t.appendChildView(t.createChildView(Qe,Object.assign({},e))),t.ref.measure=Gt("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter((function(n){return!G(n.value)})).map((function(n){t.element.dataset[n.name]=n.value})),t.ref.widthPrevious=null,t.ref.widthUpdated=Vr((function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")}),250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];var i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,u="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&u&&!i&&(t.element.addEventListener("touchmove",jr,{passive:!1}),t.element.addEventListener("gesturestart",jr));var c=t.query("GET_CREDITS");if(2===c.length){var a=document.createElement("a");a.className="filepond--credits",a.href=c[0],a.tabIndex=-1,a.target="_blank",a.rel="noopener noreferrer nofollow",a.textContent=c[1],t.element.appendChild(a),t.ref.credits=a}},write:function(n){var t=n.root,e=n.actions;if(Qr({root:t,props:n.props,actions:e}),e.filter((function(n){return/^DID_SET_STYLE_/.test(n.type)})).filter((function(n){return!G(n.data.value)})).map((function(n){var e=n.data,r=Fr(n.type.substring(8).toLowerCase(),"_");t.element.dataset[r]=e.value,t.invalidateLayout()})),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var r=t.ref.bounds;r||(r=t.ref.bounds=Wr(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var o=t.ref,i=o.hopper,u=o.label,c=o.list,a=o.panel;i&&i.updateHopperState();var f=t.query("GET_PANEL_ASPECT_RATIO"),l=t.query("GET_ALLOW_MULTIPLE"),E=t.query("GET_TOTAL_ITEMS"),s=E===(l?t.query("GET_MAX_FILES")||1e6:1),_=e.find((function(n){return"DID_ADD_ITEM"===n.type}));if(s&&_){var T=_.data.interactionMethod;u.opacity=0,l?u.translateY=-40:T===J?u.translateX=40:u.translateY=T===tn?40:30}else s||(u.opacity=1,u.translateX=0,u.translateY=0);var I=xr(t),d=Yr(t),v=u.rect.element.height,D=!l||s?0:v,R=s?c.rect.element.marginTop:0,p=0===E?0:c.rect.element.marginBottom,O=D+R+d.visual+p,S=D+R+d.bounds+p;if(c.translateY=Math.max(0,D-c.rect.element.marginTop)-I.top,f){var A=t.rect.element.width,M=A*f;f!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=f,t.ref.updateHistory=[]);var m=t.ref.updateHistory;m.push(A);if(m.length>4)for(var L=m.length,g=L-10,P=0,y=L;y>=g;y--)if(m[y]===m[y-2]&&P++,P>=2)return;a.scalable=!1,a.height=M;var b=M-D-(p-I.bottom)-(s?R:0);c.overflow=d.visual>b?b:null,t.height=M}else if(r.fixedHeight){a.scalable=!1;var w=r.fixedHeight-D-(p-I.bottom)-(s?R:0);c.overflow=d.visual>w?w:null}else if(r.cappedHeight){var N=O>=r.cappedHeight,C=Math.min(r.cappedHeight,O);a.scalable=!0,a.height=N?C:C-I.top-I.bottom;var h=C-D-(p-I.bottom)-(s?R:0);c.overflow=O>r.cappedHeight&&d.visual>h?h:null,t.height=Math.min(r.cappedHeight,S-I.top-I.bottom)}else{var U=E>0?I.top+I.bottom:0;a.scalable=!0,a.height=Math.max(v,O-U),t.height=Math.max(v,S-U)}t.ref.credits&&a.heightCurrent&&(t.ref.credits.style.transform="translateY("+a.heightCurrent+"px)")}},destroy:function(n){var t=n.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",jr),t.element.removeEventListener("gesturestart",jr)},mixins:{styles:["height"]}}),$r=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,o=Mn(),i=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object.assign({},n),o=[],i=[],u=function(n,t,e){!e||document.hidden?(l[n]&&l[n](t),o.push({type:n,data:t})):i.push({type:n,data:t})},c=function(n){for(var t,e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return f[n]?(t=f)[n].apply(t,r):null},a={getState:function(){return Object.assign({},r)},processActionQueue:function(){var n=[].concat(o);return o.length=0,n},processDispatchQueue:function(){var n=[].concat(i);i.length=0,n.forEach((function(n){u(n.type,n.data)}))},dispatch:u,query:c},f={};t.forEach((function(n){f=Object.assign({},n(r),{},f)}));var l={};return e.forEach((function(n){l=Object.assign({},n(u,c,r),{},l)})),a}({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Q(o)},[Fn,K(o)],[yt,$(o)]);i.dispatch("SET_OPTIONS",{options:n});var u=function(){document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",u);var c=null,a=!1,f=!1,l=null,E=null,s=function(){a||(a=!0),clearTimeout(c),c=setTimeout((function(){a=!1,l=null,E=null,f&&(f=!1,i.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",s);var _=Zr(i,{id:on()}),T=!1,d=!1,v={_read:function(){a&&(E=window.innerWidth,l||(l=E),f||E===l||(i.dispatch("DID_START_RESIZE"),f=!0)),d&&T&&(T=null===_.element.offsetParent),T||(_._read(),d=_.rect.element.hidden)},_write:function(n){var t,e=i.processActionQueue().filter((function(n){return!/^SET_/.test(n.type)}));T&&!e.length||(O(e),T=_._write(n,e,f),(t=i.query("GET_ITEMS")).forEach((function(n,e){n.released&&ln(t,e)})),T&&i.processDispatchQueue())}},D=function(n){return function(t){var e={type:n};if(!t)return e;if(t.hasOwnProperty("error")&&(e.error=t.error?Object.assign({},t.error):null),t.status&&(e.status=Object.assign({},t.status)),t.file&&(e.output=t.file),t.source)e.file=t.source;else if(t.item||t.id){var r=t.item?t.item:i.query("GET_ITEM",t.id);e.file=r?Tn(r):null}return t.items&&(e.items=t.items.map(Tn)),/progress/.test(n)&&(e.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(e.origin=t.origin,e.target=t.target),e}},R={DID_DESTROY:D("destroy"),DID_INIT:D("init"),DID_THROW_MAX_FILES:D("warning"),DID_INIT_ITEM:D("initfile"),DID_START_ITEM_LOAD:D("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:D("addfileprogress"),DID_LOAD_ITEM:D("addfile"),DID_THROW_ITEM_INVALID:[D("error"),D("addfile")],DID_THROW_ITEM_LOAD_ERROR:[D("error"),D("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[D("error"),D("removefile")],DID_PREPARE_OUTPUT:D("preparefile"),DID_START_ITEM_PROCESSING:D("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:D("processfileprogress"),DID_ABORT_ITEM_PROCESSING:D("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:D("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:D("processfiles"),DID_REVERT_ITEM_PROCESSING:D("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[D("error"),D("processfile")],DID_REMOVE_ITEM:D("removefile"),DID_UPDATE_ITEMS:D("updatefiles"),DID_ACTIVATE_ITEM:D("activatefile"),DID_REORDER_ITEMS:D("reorderfiles")},p=function(n){var t=Object.assign({pond:g},n);delete t.type,_.element.dispatchEvent(new CustomEvent("FilePond:"+n.type,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));var e=[];n.hasOwnProperty("error")&&e.push(n.error),n.hasOwnProperty("file")&&e.push(n.file);var r=["type","error","file"];Object.keys(n).filter((function(n){return!r.includes(n)})).forEach((function(t){return e.push(n[t])})),g.fire.apply(g,[n.type].concat(e));var o=i.query("GET_ON"+n.type.toUpperCase());o&&o.apply(void 0,e)},O=function(n){n.length&&n.filter((function(n){return R[n.type]})).forEach((function(n){var t=R[n.type];(Array.isArray(t)?t:[t]).forEach((function(t){"DID_INIT_ITEM"===n.type?p(t(n.data)):setTimeout((function(){p(t(n.data))}),0)}))}))},S=function(n){return new Promise((function(t,e){i.dispatch("REQUEST_ITEM_PREPARE",{query:n,success:function(n){t(n)},failure:function(n){e(n)}})}))},A=function(n,t){return"object"!=typeof n||(e=n).file&&e.id||t||(t=n,n=void 0),i.dispatch("REMOVE_ITEM",Object.assign({},t,{query:n})),null===i.query("GET_ACTIVE_ITEM",n);var e},M=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise((function(n,e){var r=[],o={};if(b(t[0]))r.push.apply(r,t[0]),Object.assign(o,t[1]||{});else{var u=t[t.length-1];"object"!=typeof u||u instanceof Blob||Object.assign(o,t.pop()),r.push.apply(r,t)}i.dispatch("ADD_ITEMS",{items:r,index:o.index,interactionMethod:J,success:n,failure:e})}))},m=function(){return i.query("GET_ACTIVE_ITEMS")},L=function(n){return new Promise((function(t,e){i.dispatch("REQUEST_ITEM_PROCESSING",{query:n,success:function(n){t(n)},failure:function(n){e(n)}})}))},g=Object.assign({},En(),{},v,{},function(n,e){var r={};return t(e,(function(t){r[t]={get:function(){return n.getState().options[t]},set:function(e){n.dispatch("SET_"+Z(t,"_").toUpperCase(),{value:e})}}})),r}(i,o),{setOptions:function(n){return i.dispatch("SET_OPTIONS",{options:n})},addFile:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(e,r){M([{source:n,options:t}],{index:t.index}).then((function(n){return e(n&&n[0])})).catch(r)}))},addFiles:M,getFile:function(n){return i.query("GET_ACTIVE_ITEM",n)},processFile:L,prepareFile:S,removeFile:A,moveFile:function(n,t){return i.dispatch("MOVE_ITEM",{query:n,index:t})},getFiles:m,processFiles:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=Array.isArray(t[0])?t[0]:t;if(!r.length){var o=m().filter((function(n){return!(n.status===In.IDLE&&n.origin===dn.LOCAL)&&n.status!==In.PROCESSING&&n.status!==In.PROCESSING_COMPLETE&&n.status!==In.PROCESSING_REVERT_ERROR}));return Promise.all(o.map(L))}return Promise.all(r.map(L))},removeFiles:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r,o=Array.isArray(t[0])?t[0]:t;"object"==typeof o[o.length-1]?r=o.pop():Array.isArray(t[0])&&(r=t[1]);var i=m();return o.length?o.map((function(n){return I(n)?i[n]?i[n].id:null:n})).filter((function(n){return n})).map((function(n){return A(n,r)})):Promise.all(i.map((function(n){return A(n,r)})))},prepareFiles:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=Array.isArray(t[0])?t[0]:t,o=r.length?r:m();return Promise.all(o.map(S))},sort:function(n){return i.dispatch("SORT",{compare:n})},browse:function(){var n=_.element.querySelector("input[type=file]");n&&n.click()},destroy:function(){g.fire("destroy",_.element),i.dispatch("ABORT_ALL"),_._destroy(),window.removeEventListener("resize",s),document.removeEventListener("visibilitychange",u),i.dispatch("DID_DESTROY")},insertBefore:function(n){return P(_.element,n)},insertAfter:function(n){return y(_.element,n)},appendTo:function(n){return n.appendChild(_.element)},replaceElement:function(n){P(_.element,n),n.parentNode.removeChild(n),r=n},restoreElement:function(){r&&(y(r,_.element),_.element.parentNode.removeChild(_.element),r=null)},isAttachedTo:function(n){return _.element===n||r===n},element:{get:function(){return _.element}},status:{get:function(){return i.query("GET_STATUS")}}});return i.dispatch("DID_INIT"),e(g)},Kr=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t(Mn(),(function(n,t){e[n]=t[0]})),$r(Object.assign({},e,{},n))},Jr=function n(e,r){t(r,(function(r,o){t(e,(function(n,t){var i,u=new RegExp(r);if(u.test(n)&&(delete e[n],!1!==o))if(U(o))e[o]=t;else{var c=o.group;q(o)&&!e[c]&&(e[c]={}),e[c][(i=n.replace(u,""),i.charAt(0).toLowerCase()+i.slice(1))]=t}})),o.mapping&&n(e[o.group],o.mapping)}))},no=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];t(n.attributes,(function(t){o.push(n.attributes[t])}));var i=o.filter((function(n){return n.name})).reduce((function(t,e){var o,i=r(n,e.name);return t[(o=e.name,Fr(o.replace(/^data-/,"")))]=i===e.name||i,t}),{});return Jr(i,e),i},to=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Sn("SET_ATTRIBUTE_TO_OPTION_MAP",e);var r=Object.assign({},t),o=no("FIELDSET"===n.nodeName?n.querySelector("input[type=file]"):n,e);Object.keys(o).forEach((function(n){q(o[n])?(q(r[n])||(r[n]={}),Object.assign(r[n],o[n])):r[n]=o[n]})),r.files=(t.files||[]).concat(Array.from(n.querySelectorAll("input:not([type=file])")).map((function(n){return{source:n.value,options:{type:n.dataset.type}}})));var i=Kr(r);return n.files&&Array.from(n.files).forEach((function(n){i.addFile(n)})),i.replaceElement(n),i},eo=function(){return(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?to.apply(void 0,arguments):Kr.apply(void 0,arguments)},ro=["fire","_read","_write"],oo=function(n){var t={};return sn(n,t,ro),t},io=function(n,t){return n.replace(/(?:{([a-zA-Z]+)})/g,(function(n,e){return t[e]}))},uo=function(n){var t=new Blob(["(",n.toString(),")()"],{type:"application/javascript"}),e=URL.createObjectURL(t),r=new Worker(e);return{transfer:function(){},post:function(n,t,e){var o=on();r.onmessage=function(n){n.data.id===o&&t(n.data.message)},r.postMessage({id:o,message:n},e)},terminate:function(){r.terminate(),URL.revokeObjectURL(e)}}},co=function(n){return new Promise((function(t,e){var r=new Image;r.onload=function(){t(r)},r.onerror=function(n){e(n)},r.src=n}))},ao=function(n,t){var e=n.slice(0,n.size,n.type);return e.lastModifiedDate=n.lastModifiedDate,e.name=t,e},fo=function(n){return ao(n,n.name)},lo=[],Eo=function(n){if(!lo.includes(n)){lo.push(n);var e=n({addFilter:An,utils:{Type:Rn,forin:t,isString:U,isFile:Dt,toNaturalFileSize:Bt,replaceInString:io,getExtensionFromFilename:Yn,getFilenameWithoutExtension:vt,guesstimateMimeType:Je,getFileFromBlob:qn,getFilenameFromURL:xn,createRoute:g,createWorker:uo,createView:L,createItemAPI:Tn,loadImage:co,copyFile:fo,renameFile:ao,createBlob:Xn,applyFilterChain:On,text:wt,getNumericAspectRatioFromString:gn},views:{fileActionButton:Ut}});Object.assign(mn,e.options)}},so=(Qt=l()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent)),function(){return Qt}),_o={apps:[]},To=function(){};if(n.Status={},n.FileStatus={},n.FileOrigin={},n.OptionTypes={},n.create=To,n.destroy=To,n.parse=To,n.find=To,n.registerPlugin=To,n.getOptions=To,n.setOptions=To,so()){!function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="__framePainter";if(window[r])return window[r].readers.push(n),void window[r].writers.push(t);window[r]={readers:[n],writers:[t]};var o=window[r],i=1e3/e,u=null,c=null,a=null,f=null,l=function(){document.hidden?(a=function(){return window.setTimeout((function(){return E(performance.now())}),i)},f=function(){return window.clearTimeout(c)}):(a=function(){return window.requestAnimationFrame(E)},f=function(){return window.cancelAnimationFrame(c)})};document.addEventListener("visibilitychange",(function(){f&&f(),l(),E(performance.now())}));var E=function n(t){c=a(n),u||(u=t);var e=t-u;e<=i||(u=t-e%i,o.readers.forEach((function(n){return n()})),o.writers.forEach((function(n){return n(t)})))};l(),E(performance.now())}((function(){_o.apps.forEach((function(n){return n._read()}))}),(function(n){_o.apps.forEach((function(t){return t._write(n)}))}));var Io=function t(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:so,create:n.create,destroy:n.destroy,parse:n.parse,find:n.find,registerPlugin:n.registerPlugin,setOptions:n.setOptions}})),document.removeEventListener("DOMContentLoaded",t)};"loading"!==document.readyState?setTimeout((function(){return Io()}),0):document.addEventListener("DOMContentLoaded",Io);var vo=function(){return t(Mn(),(function(t,e){n.OptionTypes[t]=e[1]}))};n.Status=Object.assign({},yn),n.FileOrigin=Object.assign({},dn),n.FileStatus=Object.assign({},In),n.OptionTypes={},vo(),n.create=function(){var t=eo.apply(void 0,arguments);return t.on("destroy",n.destroy),_o.apps.push(t),oo(t)},n.destroy=function(n){var t=_o.apps.findIndex((function(t){return t.isAttachedTo(n)}));return t>=0&&(_o.apps.splice(t,1)[0].restoreElement(),!0)},n.parse=function(t){return Array.from(t.querySelectorAll(".filepond")).filter((function(n){return!_o.apps.find((function(t){return t.isAttachedTo(n)}))})).map((function(t){return n.create(t)}))},n.find=function(n){var t=_o.apps.find((function(t){return t.isAttachedTo(n)}));return t?oo(t):null},n.registerPlugin=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t.forEach(Eo),vo()},n.getOptions=function(){var n={};return t(Mn(),(function(t,e){n[t]=e[0]})),n},n.setOptions=function(e){return q(e)&&(_o.apps.forEach((function(n){n.setOptions(e)})),function(n){t(n,(function(n,t){mn[n]&&(mn[n][0]=k(t,mn[n][0],mn[n][1]))}))}(e)),n.getOptions()}}n.supported=so,Object.defineProperty(n,"__esModule",{value:!0})}(r.exports)),r.exports),i=t({__proto__:null,default:n(o)},[o]);
/*!
 * FilePond 4.32.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */export{i as f}